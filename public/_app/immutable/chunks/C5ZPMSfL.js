import{b as tt,g as ft,f as z,a as r,c as pe,i as Ue,s as Q,d as dt,e as we,t as Ne}from"./CQ5d6LE4.js";import{A as ie,H as at,M as st,a3 as gt,aY as mt,I as rt,ak as ht,av as _t,aX as pt,aU as bt,R as yt,aj as Ge,aZ as xt,aM as Pt,p as ve,u as Ve,w as h,x as _,a as ce,ae as Ce,t as M,V as de,k as O,af as Ze,f as E,j as t,v as P,s as se,z as Se,o as Qe,b as ut,y as kt}from"./CmTovZ1L.js";import{e as Fe,i as nt,M as Je,I as De,D as ze,f as We,N as wt}from"./Dfo9VKNr.js";import{l as ue,p as f,i as j,b as vt,s as zt,a as Mt}from"./CB2o9Wn4.js";import{a as Me,b as ye,g as qt,y as It,z as et,f as lt,C as Rt,r as je,c as Oe}from"./C1qYwYBx.js";import{i as Ke}from"./DcMRWZqb.js";import{i as Nt,g as it,c as $e,C as Ct}from"./CSdh5NeJ.js";import{b as St}from"./DEzKOhsJ.js";function Tt(b,e,d=!1,u=!1,w=!1){var p=b,a="";ie(()=>{var i=gt;if(a===(a=e()??"")){at&&st();return}if(i.nodes_start!==null&&(mt(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),a!==""){if(at){rt.data;for(var y=st(),g=y;y!==null&&(y.nodeType!==ht||y.data!=="");)g=y,y=_t(y);if(y===null)throw pt(),bt;tt(rt,g),p=yt(y);return}var m=a+"";d?m=`<svg>${m}</svg>`:u&&(m=`<math>${m}</math>`);var s=ft(m);if((d||u)&&(s=Ge(s)),tt(Ge(s),s.lastChild),d||u)for(;Ge(s);)p.before(Ge(s));else p.before(s)}})}function At(b,e){xt(window,["resize"],()=>Pt(()=>e(window[b])))}var Et=z("<div><!></div>");function _e(b,e){const d=ue(e,["children","$$slots","$$events","$$legacy"]),u=ue(d,["class","xs","sm","md","lg","xl","xxl"]);ve(e,!1);let w=f(e,"class",8,""),p=f(e,"xs",8,void 0),a=f(e,"sm",8,void 0),i=f(e,"md",8,void 0),y=f(e,"lg",8,void 0),g=f(e,"xl",8,void 0),m=f(e,"xxl",8,void 0);const s=[],q={xs:p(),sm:a(),md:i(),lg:y(),xl:g(),xxl:m()};Object.keys(q).forEach(v=>{const k=q[v];if(!k&&k!=="")return;const R=v==="xs";if(Nt(k)){const C=R?"-":`-${v}-`,fe=it(R,v,k.size);(k.size||k.size==="")&&s.push(fe),k.push&&s.push(`push${C}${k.push}`),k.pull&&s.push(`pull${C}${k.pull}`),k.offset&&s.push(`offset${C}${k.offset}`),k.order&&s.push(`order${C}${k.order}`)}else s.push(it(R,v,k))}),s.length||s.push("col"),w()&&s.push(w()),Ke();var x=Et();Me(x,v=>({...u,class:v}),[()=>Ve(()=>s.join(" "))]);var n=h(x);ye(n,e,"default",{},null),_(x),r(b,x),ce()}var Bt=z("<div><!></div>"),Dt=z('<div role="progressbar" aria-valuemin="0"><!></div>'),jt=z("<div><!></div>");function Ot(b,e){const d=ue(e,["children","$$slots","$$events","$$legacy"]),u=ue(d,["class","bar","multi","value","max","animated","striped","color","barClassName"]);ve(e,!1);const w=de(),p=de(),a=de();let i=f(e,"class",8,""),y=f(e,"bar",8,!1),g=f(e,"multi",8,!1),m=f(e,"value",8,0),s=f(e,"max",8,100),q=f(e,"animated",8,!1),x=f(e,"striped",8,!1),n=f(e,"color",8,""),v=f(e,"barClassName",8,"");Ce(()=>O(i()),()=>{M(w,$e(i(),"progress"))}),Ce(()=>(O(y()),O(i()),O(v()),O(q()),O(n()),O(x())),()=>{M(p,$e("progress-bar",y()&&i()||v(),q()?"progress-bar-animated":null,n()?`text-bg-${n()}`:null,x()||q()?"progress-bar-striped":null))}),Ce(()=>(O(m()),O(s())),()=>{M(a,parseInt(m(),10)/parseInt(s(),10)*100)}),Ze(),Ke();var k=pe(),R=E(k);{var C=X=>{var T=pe(),F=E(T);{var oe=I=>{var l=pe(),S=E(l);ye(S,e,"default",{},null),r(I,l)},re=I=>{var l=Bt();Me(l,()=>({...u,class:t(p),style:`width: ${t(a)??""}%`,role:"progressbar","aria-valuenow":m(),"aria-valuemin":"0","aria-valuemax":s()}));var S=h(l);ye(S,e,"default",{},null),_(l),r(I,l)};j(F,I=>{g()?I(oe):I(re,!1)})}r(X,T)},fe=X=>{var T=jt();Me(T,()=>({...u,class:t(w)}));var F=h(T);{var oe=I=>{var l=pe(),S=E(l);ye(S,e,"default",{},null),r(I,l)},re=I=>{var l=Dt(),S=h(l);ye(S,e,"default",{},null),_(l),ie(()=>{qt(l,1,It(t(p))),et(l,`width: ${t(a)??""}%`),lt(l,"aria-valuenow",m()),lt(l,"aria-valuemax",s())}),r(I,l)};j(F,I=>{g()?I(oe):I(re,!1)})}_(T),r(X,T)};j(R,X=>{y()?X(C):X(fe,!1)})}r(b,k),ce()}var Ut=z("<div><!></div>");function Le(b,e){const d=ue(e,["children","$$slots","$$events","$$legacy"]),u=ue(d,["class","noGutters","form","cols","inner"]);ve(e,!1);const w=de();let p=f(e,"class",8,""),a=f(e,"noGutters",8,!1),i=f(e,"form",8,!1),y=f(e,"cols",8,0),g=f(e,"inner",12,void 0);function m(x){const n=parseInt(x);if(isNaN(n)){if(typeof x=="object")return["xs","sm","md","lg","xl"].map(v=>{const R=v==="xs"?"-":`-${v}-`,C=x[v];return typeof C=="number"&&C>0?`row-cols${R}${C}`:null}).filter(v=>!!v)}else if(n>0)return[`row-cols-${n}`];return[]}Ce(()=>(O(p()),O(a()),O(i()),O(y())),()=>{M(w,$e(p(),a()?"gx-0":null,i()?"form-row":"row",...m(y())))}),Ze(),Ke();var s=Ut();Me(s,()=>({...u,class:t(w)}));var q=h(s);ye(q,e,"default",{},null),_(s),St(s,x=>g(x),()=>g()),r(b,s),ce()}var Ht=Ue("<g><!></g>");function Xt(b,e){ve(e,!1);let d=870711;function u(){return d+=1,`fa-${d.toString(16)}`}let w=de(""),p=f(e,"data",8);function a(g){if(!g||!g.raw)return"";let m=g.raw;const s={};return m=m.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(q,x)=>{const n=u();return s[x]=n,` id="${n}"`}),m=m.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(q,x,n,v)=>{const k=x||v;return!k||!s[k]?q:`#${s[k]}`}),m}Ce(()=>O(p()),()=>{M(w,a(p()))}),Ze();var i=Ht(),y=h(i);Tt(y,()=>t(w),!0),_(i),r(b,i),ce()}var Yt=Ue("<svg><!></svg>");function Gt(b,e){const d=ue(e,["children","$$slots","$$events","$$legacy"]),u=ue(d,["class","width","height","box","spin","inverse","pulse","flip","style","label"]);let w=f(e,"class",8,""),p=f(e,"width",8),a=f(e,"height",8),i=f(e,"box",8,"0 0 0 0"),y=f(e,"spin",8,!1),g=f(e,"inverse",8,!1),m=f(e,"pulse",8,!1),s=f(e,"flip",8,"none"),q=f(e,"style",8,""),x=f(e,"label",8,"");var n=Yt();Me(n,()=>({version:"1.1",class:`fa-icon ${w()??""}`,width:p(),height:a(),"aria-label":x(),role:x()?"img":"presentation",viewBox:i(),style:q(),...u,[Rt]:{"fa-spin":y(),"fa-pulse":m(),"fa-inverse":g(),"fa-flip-horizontal":s()==="horizontal","fa-flip-vertical":s()==="vertical"}}),void 0,void 0,void 0,"svelte-v67cny");var v=h(n);ye(v,e,"default",{},null),_(n),r(b,n)}var Lt=Ue("<path></path>"),Vt=Ue("<polygon></polygon>"),Ft=Ue("<!><!><!>",1);function Be(b,e){const d=ue(e,["children","$$slots","$$events","$$legacy"]),u=ue(d,["class","data","scale","spin","inverse","pulse","flip","label","style"]);ve(e,!1);let w=f(e,"class",8,""),p=f(e,"data",8),a=de(),i=f(e,"scale",8,1),y=f(e,"spin",8,!1),g=f(e,"inverse",8,!1),m=f(e,"pulse",8,!1),s=f(e,"flip",8,void 0),q=f(e,"label",8,""),x=f(e,"style",8,""),n=1,v=de(10),k=de(10),R=de(),C=de();function fe(l){let S,W;if(l)if("definition"in l){console.error("`import faIconName from '@fortawesome/package-name/faIconName` not supported - Please use `import { faIconName } from '@fortawesome/package-name/faIconName'` instead");return}else if("iconName"in l&&"icon"in l){S=l.iconName;const[c,G,,,U]=l.icon,ne=Array.isArray(U)?U:[U];W={width:c,height:G,paths:ne.map($=>({d:$}))}}else S=Object.keys(l)[0],W=l[S];else return;return W}function X(){let l=1;return typeof i()<"u"&&(l=Number(i())),isNaN(l)||l<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),n):l*n}function T(){return t(a)?`0 0 ${t(a).width} ${t(a).height}`:`0 0 ${t(v)} ${t(k)}`}function F(){return t(a)?Math.max(t(a).width,t(a).height)/16:1}function oe(){return t(a)?t(a).width/F()*X():0}function re(){return t(a)?t(a).height/F()*X():0}function I(){let l="";x()!==null&&(l+=x());let S=X();return S===1?l.length===0?"":l:(l!==""&&!l.endsWith(";")&&(l+="; "),`${l}font-size: ${S}em`)}Ce(()=>(O(p()),O(x()),O(i())),()=>{M(a,fe(p())),x(),i(),M(v,oe()),M(k,re()),M(R,I()),M(C,T())}),Ze(),Ke(),Gt(b,vt({get label(){return q()},get width(){return t(v)},get height(){return t(k)},get box(){return t(C)},get style(){return t(R)},get spin(){return y()},get flip(){return s()},get inverse(){return g()},get pulse(){return m()},get class(){return w()}},()=>u,{children:(l,S)=>{var W=pe(),c=E(W);ye(c,e,"default",{},G=>{var U=Ft(),ne=E(U);Fe(ne,1,()=>(t(a),Ve(()=>t(a)?.paths||[])),nt,(L,Z)=>{var Y=Lt();Me(Y,()=>({...t(Z)})),r(L,Y)});var $=P(ne);Fe($,1,()=>(t(a),Ve(()=>t(a)?.polygons||[])),nt,(L,Z)=>{var Y=Vt();Me(Y,()=>({...t(Z)})),r(L,Y)});var o=P($);{var ee=L=>{Xt(L,{get data(){return t(a)},set data(Z){M(a,Z)},$$legacy:!0})};j(o,L=>{t(a),Ve(()=>t(a)?.raw)&&L(ee)})}r(G,U)}),r(l,W)},$$slots:{default:!0}})),ce()}const ct={edit:{width:1792,height:1792,paths:[{d:"M888 1184l116-116-152-152-116 116v56h96v96h56zM1328 464q-16-16-33 1l-350 350q-17 17-1 33t33-1l350-350q17-17 1-33zM1408 1058v190q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-14 14-32 8-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-126q0-13 9-22l64-64q15-15 35-7t20 29zM1312 320l288 288-672 672h-288v-288zM1756 452l-92 92-288-288 92-92q28-28 68-28t68 28l152 152q28 28 28 68t-28 68z"}]}},ot={plus:{width:1408,height:1792,paths:[{d:"M1408 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"}]}},Zt={trash:{width:1408,height:1792,paths:[{d:"M512 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zM768 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zM1024 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zM480 384h448l-48-117q-7-9-17-11h-317q-10 2-17 11zM1408 416v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"}]}};function Jt({inputTime:b,inputPages:e,previousPage:d,pageCount:u}){const w=Number.parseInt(b),p=Number.parseInt(e);return!b||b.length<1?{valid:!1,message:"Time read was empty"}:!e||e.length<1?{valid:!1,message:"Current page was empty"}:Object.is(p,"NaN")?{valid:!1,message:"Page number added is not a valid integer"}:Object.is(w,"NaN")?{valid:!1,message:"Number of minutes spent reading is not a valid integer"}:p<d?{valid:!1,message:"You can't read backwards. If you have to adjust the current page press the current page on the book card."}:u<p?{valid:!1,message:"You can't read more pages than there are in the book."}:{valid:!0}}function Kt({inputPages:b,pageCount:e}){const d=Number.parseInt(b);return!b||b.length<1?{valid:!1,message:"Page number is empty, and I don't like that one bit – no, sir, I don't."}:Object.is(d,NaN)?{valid:!1,message:"Page number is not a valid number."}:d<0||e<d?{valid:!1,message:"Page number must be between 0 and the total number of pages in the book."}:{valid:!0}}var Qt=z('<input id="inputTime" class="form-control" placeholder="Minutes of reading" type="number"/>'),Wt=z('<input id="inputPagesReading" class="form-control" type="number" placeholder="What page are you on"/>'),$t=z('<!> <div style="height: 8px;"></div> <!>',1);function ea(b,e){ve(e,!0);let d=se(void 0),u=se(void 0);function w(){console.log(t(d)+t(u));const{valid:a,message:i}=Jt({inputTime:t(d),inputPages:t(u),previousPage:e.book.currentPage,pageCount:e.book.pageCount});if(!a){alert(i);return}e.onaddReading({id:e.book.id,timeRead:t(d),currentPage:t(u),previousPage:e.book.currentPage}),e.oncloseModal()}function p(){e.oncloseModal()}{let a=Se(()=>!!e.book);Je(b,{get open(){return t(a)},onclose:p,primaryText:"Add",primaryAction:w,get header(){return e.book.title},children:(i,y)=>{var g=$t(),m=E(g);De(m,{label:"Minutes read",inputId:"inputTime",children:(q,x)=>{var n=Qt();je(n),Oe(n,()=>t(d),v=>M(d,v)),r(q,n)},$$slots:{default:!0}});var s=P(m,4);De(s,{label:"Current page",inputId:"inputPagesReading",children:(q,x)=>{var n=Wt();je(n),Oe(n,()=>t(u),v=>M(u,v)),r(q,n)},$$slots:{default:!0}}),r(i,g)},$$slots:{default:!0}})}ce()}var ta=z('<input id="inputPages" class="form-control" type="number" placeholder="What page are you on"/>');function aa(b,e){ve(e,!0);let d=Se(()=>!!e.book),u=se(void 0);function w(){const{valid:p,message:a}=Kt({inputPages:t(u),pageCount:e.book.pageCount});if(!p){alert(a);return}e.onupdateCurrentPage({id:e.book.id,currentPage:Number.parseInt(t(u)),previousPage:e.book.currentPage}),e.oncloseModal()}Je(b,{get open(){return t(d)},onclose:()=>e.oncloseModal(),get header(){return e.book.title},primaryAction:w,primaryText:"Update page",children:(p,a)=>{De(p,{label:"Set current page",inputId:"inputPages",children:(i,y)=>{var g=ta();je(g),Oe(g,()=>t(u),m=>M(u,m)),r(i,g)},$$slots:{default:!0}})},$$slots:{default:!0}}),ce()}var sa=z('<input id="inputTime" class="form-control" placeholder="Minutes of reading" type="number"/>'),ra=z('<input id="inputToPage" class="form-control" type="number" placeholder="Ending page"/>'),na=z('<!> <div style="height: 8px;"></div> <div style="margin-bottom: 1rem;"><label style="font-size: 0.9rem; color: #666; display: block; margin-bottom: 0.25rem;">From page (cannot be changed)</label> <div style="padding: 0.5rem; background-color: #f5f5f5; border-radius: 4px; color: #666;"> </div></div> <!>',1);function la(b,e){ve(e,!0);let d=se(Qe(e.session?.timeRead||0)),u=se(Qe(e.session?.toPage||0));ut(()=>{e.session&&(M(d,e.session.timeRead,!0),M(u,e.session.toPage,!0))});function w(){if(t(d)<=0){alert("Time read must be greater than 0");return}if(t(u)<0){alert("Page numbers must be positive");return}if(t(u)<=e.session.fromPage){alert(`End page must be greater than start page (${e.session.fromPage})`);return}if(e.book&&t(u)>e.book.pageCount){alert(`Page number cannot exceed book's total pages (${e.book.pageCount})`);return}if(e.book&&e.session.toPage!==e.book.currentPage){alert("Only the most recent reading session can be edited");return}e.onupdateSession({sessionId:e.session.id,timeRead:t(d),fromPage:e.session.fromPage,toPage:t(u)}),e.oncloseModal()}function p(){e.oncloseModal()}{let a=Se(()=>!!e.session);Je(b,{get open(){return t(a)},onclose:p,primaryText:"Update",primaryAction:w,header:"Edit Reading Session",children:(i,y)=>{var g=na(),m=E(g);De(m,{label:"Minutes read",inputId:"inputTime",children:(v,k)=>{var R=sa();je(R),Oe(R,()=>t(d),C=>M(d,C)),r(v,R)},$$slots:{default:!0}});var s=P(m,4),q=P(h(s),2),x=h(q,!0);_(q),_(s);var n=P(s,2);De(n,{label:"To page",inputId:"inputToPage",children:(v,k)=>{var R=ra();je(R),Oe(R,()=>t(u),C=>M(u,C)),r(v,R)},$$slots:{default:!0}}),ie(()=>Q(x,e.session?.fromPage||0)),r(i,g)},$$slots:{default:!0}})}ce()}var ia=z('<div class="empty-state svelte-4szxma">No reading sessions recorded yet.</div>'),oa=z('<span role="button" tabindex="0" class="edit-button svelte-4szxma"><!></span> <span role="button" tabindex="0" class="edit-button svelte-4szxma"><!></span>',1),da=z('<span class="button-spacer svelte-4szxma"></span> <span class="button-spacer svelte-4szxma"></span>',1),ua=z('<div class="session svelte-4szxma"><div class="session-header svelte-4szxma"><span class="session-date svelte-4szxma"> </span> <div class="session-time-container svelte-4szxma"><!> <span class="session-time svelte-4szxma"> </span></div></div> <div class="session-details svelte-4szxma"><div class="detail svelte-4szxma"><span class="detail-label svelte-4szxma">Pages:</span> <span> </span></div> <div class="detail svelte-4szxma"><span class="detail-label svelte-4szxma">Read:</span> <span> </span></div></div></div>'),va=z('<div class="sessions-container svelte-4szxma"><!></div>'),ca=z("<!> <!>",1);function fa(b,e){ve(e,!0);let d=Se(()=>!!e.book),u=se(Qe([]));ut(()=>{if(e.book&&e.userId)return ze.getReadingSessions(e.userId,e.book.id).subscribe(v=>{M(u,v,!0)})});let w=se(null);function p(n){return n?.toDate?n.toDate().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function a(n){M(w,n,!0)}function i(n){ze.updateReadingSession({userId:e.userId,bookId:e.book.id,...n})}function y(){M(w,null)}function g(n){confirm("Are you sure you want to delete this reading session? This will update your book's progress accordingly.")&&ze.deleteReadingSession(e.userId,e.book.id,n.id)}var m=ca(),s=E(m);{let n=Se(()=>e.book?`Reading Sessions - ${e.book.title}`:"Reading Sessions");Je(s,{get open(){return t(d)},onclose:()=>e.onclose(),get header(){return t(n)},primaryAction:()=>e.onclose(),primaryText:"Close",hideSecondary:!0,children:(v,k)=>{var R=va(),C=h(R);{var fe=T=>{var F=ia();r(T,F)},X=T=>{var F=pe(),oe=E(F);Fe(oe,19,()=>t(u),re=>re.id,(re,I,l)=>{var S=ua(),W=h(S),c=h(W),G=h(c,!0);_(c);var U=P(c,2),ne=h(U);{var $=H=>{var B=oa(),J=E(B);J.__click=()=>a(t(I));var K=h(J);Be(K,{get data(){return ct},scale:"0.8",style:"color: #666;"}),_(J);var te=P(J,2);te.__click=()=>g(t(I));var me=h(te);Be(me,{get data(){return Zt},scale:"0.8",style:"color: #d9534f;"}),_(te),we("keypress",J,D=>D.key==="Enter"&&a(t(I))),we("keypress",te,D=>D.key==="Enter"&&g(t(I))),r(H,B)},o=H=>{var B=da();kt(2),r(H,B)};j(ne,H=>{t(l)===0?H($):H(o,!1)})}var ee=P(ne,2),L=h(ee,!0);_(ee),_(U),_(W);var Z=P(W,2),Y=h(Z),He=P(h(Y),2),ge=h(He);_(He),_(Y);var qe=P(Y,2),be=P(h(qe),2),xe=h(be);_(be),_(qe),_(Z),_(S),ie((H,B)=>{Q(G,H),Q(L,B),Q(ge,`${t(I).fromPage??""} → ${t(I).toPage??""}`),Q(xe,`${t(I).pagesRead??""} pages`)},[()=>p(t(I).createdAt),()=>We(t(I).timeRead)]),r(re,S)}),r(T,F)};j(C,T=>{t(u).length===0?T(fe):T(X,!1)})}_(R),r(v,R)},$$slots:{default:!0}})}var q=P(s,2);{var x=n=>{la(n,{get session(){return t(w)},get book(){return e.book},onupdateSession:i,oncloseModal:y})};j(q,n=>{t(w)&&n(x)})}r(b,m),ce()}dt(["click"]);var ga=z('<div class="menu svelte-a7k8bh">Hello</div>');function ma(b,e){var d=ga();ie(()=>et(d,`left: ${e.x}px; top: ${e.y}px;`)),r(b,d)}var ha=z('<span class="label svelte-1l34oh7">Book Title</span> <span role="button" tabindex="0" style="cursor: pointer; margin-left: 0.5em;"><!></span> <br/> <span class="author svelte-1l34oh7"> </span> <br/> <span class="title svelte-1l34oh7"> </span>',1),_a=z('<div role="button" tabindex="0" class="text-right svelte-1l34oh7" style="cursor: pointer;"><span class="label svelte-1l34oh7">Page</span> <br/> <span class="page-number svelte-1l34oh7"> </span></div>'),pa=z('<div role="button" tabindex="0" class="text-right clickable svelte-1l34oh7" style="cursor: pointer;"><span class="label svelte-1l34oh7">Time read</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),ba=z('<div class="text-right svelte-1l34oh7"><span class="label svelte-1l34oh7">Est left</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),ya=z('<div class="text-right svelte-1l34oh7"><span class="label svelte-1l34oh7">Min/Page</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),xa=z("<!> <!> <!> <!>",1),Pa=z('<div role="button" tabindex="0" style="height: 100%; text-align: center;"><!></div>'),ka=z("<!> <!> <!>",1),wa=z('<div class="progress-container svelte-1l34oh7"><!> <div class="progress-text-black svelte-1l34oh7"> </div> <div class="progress-text-white svelte-1l34oh7"> </div></div>'),za=z('<div role="button" tabindex="0" style="height: 100%; text-align: center;"><!></div>'),Ma=z('<div class="book-row svelte-1l34oh7"><!> <div class="v-spacer svelte-1l34oh7"></div> <!> <!></div>'),qa=z("<!> <!> <!> <!>",1);function Ba(b,e){ve(e,!0);const d=()=>Mt(n,"$books",u),[u,w]=zt();let p=se(void 0),a=se(null),i=se(null),y=se(null);const g=(c,G)=>{M(i,c,!0),M(y,G,!0)},m=()=>M(i,null);let s=se(null);const q=c=>M(s,c,!0),x=()=>M(s,null);let n=ze.getBooks(e.userId,e.finished);function v(c){return c.pagesRead!==0&&c.timeRead!==0}function k(c){ze.addReading({userId:e.userId,...c})}function R(c){ze.addPageUpdate({userId:e.userId,...c})}function C(c){confirm("Are you sure you want to delete this book?")&&ze.deleteBook(e.userId,c)}function fe(c){console.log(c),c.preventDefault();const{x:G,y:U}=c;M(a,{x:G,y:U},!0)}var X=qa(),T=E(X);{var F=c=>{ma(c,vt(()=>t(a)))};j(T,c=>{t(a)&&c(F)})}var oe=P(T,2);{var re=c=>{ea(c,{get book(){return t(i)},onaddReading:k,oncloseModal:m})},I=c=>{var G=pe(),U=E(G);{var ne=o=>{aa(o,{get book(){return t(i)},onupdateCurrentPage:R,oncloseModal:m})},$=o=>{var ee=pe(),L=E(ee);{var Z=Y=>{wt(Y,{open:!0,get userId(){return e.userId},get book(){return t(i)},onclose:m})};j(L,Y=>{t(i)&&t(y)==="editBook"&&Y(Z)},!0)}r(o,ee)};j(U,o=>{t(i)&&t(y)==="updatePage"?o(ne):o($,!1)},!0)}r(c,G)};j(oe,c=>{t(i)&&t(y)==="addReading"?c(re):c(I,!1)})}var l=P(oe,2);{var S=c=>{fa(c,{get book(){return t(s)},get userId(){return e.userId},onclose:x})};j(l,c=>{t(s)&&c(S)})}var W=P(l,2);Ct(W,{children:(c,G)=>{var U=pe(),ne=E(U);Fe(ne,1,d,$=>$.id,($,o)=>{var ee=Ma();ee.__contextmenu=fe;var L=h(ee);Le(L,{children:(ge,qe)=>{var be=ka(),xe=E(be);_e(xe,{children:(K,te)=>{var me=ha(),D=E(me);D.__dblclick=()=>C(t(o).id);var ae=P(D,2);ae.__click=()=>g(t(o),"editBook");var Ie=h(ae);Be(Ie,{get data(){return ct},scale:"0.8",style:"color: #666;"}),_(ae);var Re=P(ae,4),Xe=h(Re);_(Re);var Ye=P(Re,4),he=h(Ye,!0);_(Ye),ie(()=>{Q(Xe,`${t(o).author??""}:`),Q(he,t(o).title)}),we("keypress",ae,Te=>Te.key==="Enter"&&g(t(o),"editBook")),r(K,me)},$$slots:{default:!0}});var H=P(xe,2);_e(H,{md:"6",children:(K,te)=>{Le(K,{children:(me,D)=>{var ae=xa(),Ie=E(ae);_e(Ie,{children:(he,Te)=>{var A=_a();A.__click=()=>g(t(o),"updatePage");var le=P(h(A),4),Pe=h(le);_(le),_(A),ie(()=>Q(Pe,`${t(o).currentPage??""}/${t(o).pageCount??""}`)),we("keypress",A,ke=>ke.key==="Enter"&&g(t(o),"updatePage")),r(he,A)},$$slots:{default:!0}});var Re=P(Ie,2);_e(Re,{children:(he,Te)=>{var A=pa();A.__click=()=>q(t(o));var le=P(h(A),4),Pe=h(le);{var ke=N=>{var V=Ne();ie(Ee=>Q(V,Ee),[()=>We(t(o).timeRead)]),r(N,V)},Ae=N=>{var V=Ne("NA");r(N,V)};j(Pe,N=>{v(t(o))?N(ke):N(Ae,!1)})}_(le),_(A),we("keypress",A,N=>N.key==="Enter"&&q(t(o))),r(he,A)},$$slots:{default:!0}});var Xe=P(Re,2);_e(Xe,{children:(he,Te)=>{var A=ba(),le=P(h(A),4),Pe=h(le);{var ke=N=>{var V=Ne();ie(Ee=>Q(V,Ee),[()=>We(Math.round((t(o).pageCount-t(o).currentPage)*(t(o).timeRead/t(o).pagesRead)))]),r(N,V)},Ae=N=>{var V=Ne("NA");r(N,V)};j(Pe,N=>{v(t(o))?N(ke):N(Ae,!1)})}_(le),_(A),r(he,A)},$$slots:{default:!0}});var Ye=P(Xe,2);_e(Ye,{children:(he,Te)=>{var A=ya(),le=P(h(A),4),Pe=h(le);{var ke=N=>{var V=Ne();ie(Ee=>Q(V,Ee),[()=>Math.round(t(o).timeRead/t(o).pagesRead*100)/100]),r(N,V)},Ae=N=>{var V=Ne("NA");r(N,V)};j(Pe,N=>{v(t(o))?N(ke):N(Ae,!1)})}_(le),_(A),r(he,A)},$$slots:{default:!0}}),r(me,ae)},$$slots:{default:!0}})},$$slots:{default:!0}});var B=P(H,2);{var J=K=>{_e(K,{md:"1",children:(te,me)=>{var D=Pa();D.__click=()=>g(t(o),"addReading");var ae=h(D);Be(ae,{get data(){return ot},scale:"1.7",style:"margin: auto; top: 25%; position: relative; cursor: pointer;"}),_(D),we("keypress",D,Ie=>Ie.key==="Enter"&&g(t(o),"addReading")),r(te,D)},$$slots:{default:!0}})};j(B,K=>{!e.finished&&t(p)>770&&K(J)})}r(ge,be)},$$slots:{default:!0}});var Z=P(L,4);Le(Z,{children:(ge,qe)=>{_e(ge,{children:(be,xe)=>{var H=wa(),B=h(H);{let D=Se(()=>t(o).currentPage/t(o).pageCount*100);Ot(B,{color:"danger",get value(){return t(D)}})}var J=P(B,2),K=h(J);_(J);var te=P(J,2),me=h(te);_(te),_(H),ie((D,ae)=>{Q(K,`${D??""}%`),et(te,`clip-path: inset(0 ${100-t(o).currentPage/t(o).pageCount*100}% 0 0);`),Q(me,`${ae??""}%`)},[()=>Math.round(t(o).currentPage/t(o).pageCount*100),()=>Math.round(t(o).currentPage/t(o).pageCount*100)]),r(be,H)},$$slots:{default:!0}})},$$slots:{default:!0}});var Y=P(Z,2);{var He=ge=>{Le(ge,{children:(qe,be)=>{_e(qe,{children:(xe,H)=>{var B=za();B.__click=()=>g(t(o),"addReading");var J=h(B);Be(J,{get data(){return ot},scale:"1.3",style:"margin: auto; top: 25%; position: relative; cursor: pointer;"}),_(B),we("keypress",B,K=>K.key==="Enter"&&g(t(o),"addReading")),r(xe,B)},$$slots:{default:!0}})},$$slots:{default:!0}})};j(Y,ge=>{!e.finished&&t(p)<=770&&ge(He)})}_(ee),r($,ee)}),r(c,U)},$$slots:{default:!0}}),At("innerWidth",c=>M(p,c,!0)),r(b,X),ce(),w()}dt(["contextmenu","dblclick","click"]);export{Ba as B};
