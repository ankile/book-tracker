import{b as tt,g as ft,f as z,a as l,c as pe,i as He,s as W,d as dt,e as we,t as Ne}from"./CQ5d6LE4.js";import{A as le,H as at,M as st,a3 as gt,aY as mt,I as rt,ak as ht,av as _t,aX as pt,aU as bt,R as xt,aj as Ge,aZ as yt,aM as Pt,p as ue,u as Ve,w as h,x as _,a as ve,ae as Ce,t as M,V as oe,k as j,af as Ze,f as E,j as t,v as k,s as ae,z as Ie,o as Qe,b as ut,y as kt}from"./CmTovZ1L.js";import{e as Fe,i as nt,M as Je,I as je,D as ze,f as We,N as wt}from"./BM30jlsP.js";import{l as de,p as c,i as D,b as vt,s as zt,a as It}from"./CB2o9Wn4.js";import{a as Me,b as ye,g as Mt,y as qt,z as et,f as lt,C as Rt,r as Oe,c as Ue}from"./C1qYwYBx.js";import{i as Ke}from"./DcMRWZqb.js";import{i as Nt,g as it,c as $e,C as Ct}from"./CSdh5NeJ.js";import{b as St}from"./DEzKOhsJ.js";function Tt(b,e,u=!1,o=!1,w=!1){var f=b,r="";le(()=>{var i=gt;if(r===(r=e()??"")){at&&st();return}if(i.nodes_start!==null&&(mt(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),r!==""){if(at){rt.data;for(var y=st(),g=y;y!==null&&(y.nodeType!==ht||y.data!=="");)g=y,y=_t(y);if(y===null)throw pt(),bt;tt(rt,g),f=xt(y);return}var m=r+"";u?m=`<svg>${m}</svg>`:o&&(m=`<math>${m}</math>`);var n=ft(m);if((u||o)&&(n=Ge(n)),tt(Ge(n),n.lastChild),u||o)for(;Ge(n);)f.before(Ge(n));else f.before(n)}})}function At(b,e){yt(window,["resize"],()=>Pt(()=>e(window[b])))}var Et=z("<div><!></div>");function _e(b,e){const u=de(e,["children","$$slots","$$events","$$legacy"]),o=de(u,["class","xs","sm","md","lg","xl","xxl"]);ue(e,!1);let w=c(e,"class",8,""),f=c(e,"xs",8,void 0),r=c(e,"sm",8,void 0),i=c(e,"md",8,void 0),y=c(e,"lg",8,void 0),g=c(e,"xl",8,void 0),m=c(e,"xxl",8,void 0);const n=[],I={xs:f(),sm:r(),md:i(),lg:y(),xl:g(),xxl:m()};Object.keys(I).forEach(a=>{const p=I[a];if(!p&&p!=="")return;const N=a==="xs";if(Nt(p)){const q=N?"-":`-${a}-`,ce=it(N,a,p.size);(p.size||p.size==="")&&n.push(ce),p.push&&n.push(`push${q}${p.push}`),p.pull&&n.push(`pull${q}${p.pull}`),p.offset&&n.push(`offset${q}${p.offset}`),p.order&&n.push(`order${q}${p.order}`)}else n.push(it(N,a,p))}),n.length||n.push("col"),w()&&n.push(w()),Ke();var P=Et();Me(P,a=>({...o,class:a}),[()=>Ve(()=>n.join(" "))]);var x=h(P);ye(x,e,"default",{},null),_(P),l(b,P),ve()}var Bt=z("<div><!></div>"),Dt=z('<div role="progressbar" aria-valuemin="0"><!></div>'),jt=z("<div><!></div>");function Ot(b,e){const u=de(e,["children","$$slots","$$events","$$legacy"]),o=de(u,["class","bar","multi","value","max","animated","striped","color","barClassName"]);ue(e,!1);const w=oe(),f=oe(),r=oe();let i=c(e,"class",8,""),y=c(e,"bar",8,!1),g=c(e,"multi",8,!1),m=c(e,"value",8,0),n=c(e,"max",8,100),I=c(e,"animated",8,!1),P=c(e,"striped",8,!1),x=c(e,"color",8,""),a=c(e,"barClassName",8,"");Ce(()=>j(i()),()=>{M(w,$e(i(),"progress"))}),Ce(()=>(j(y()),j(i()),j(a()),j(I()),j(x()),j(P())),()=>{M(f,$e("progress-bar",y()&&i()||a(),I()?"progress-bar-animated":null,x()?`text-bg-${x()}`:null,P()||I()?"progress-bar-striped":null))}),Ce(()=>(j(m()),j(n())),()=>{M(r,parseInt(m(),10)/parseInt(n(),10)*100)}),Ze(),Ke();var p=pe(),N=E(p);{var q=H=>{var V=pe(),X=E(V);{var K=C=>{var s=pe(),S=E(s);ye(S,e,"default",{},null),l(C,s)},fe=C=>{var s=Bt();Me(s,()=>({...o,class:t(f),style:`width: ${t(r)??""}%`,role:"progressbar","aria-valuenow":m(),"aria-valuemin":"0","aria-valuemax":n()}));var S=h(s);ye(S,e,"default",{},null),_(s),l(C,s)};D(X,C=>{g()?C(K):C(fe,!1)})}l(H,V)},ce=H=>{var V=jt();Me(V,()=>({...o,class:t(w)}));var X=h(V);{var K=C=>{var s=pe(),S=E(s);ye(S,e,"default",{},null),l(C,s)},fe=C=>{var s=Dt(),S=h(s);ye(S,e,"default",{},null),_(s),le(()=>{Mt(s,1,qt(t(f))),et(s,`width: ${t(r)??""}%`),lt(s,"aria-valuenow",m()),lt(s,"aria-valuemax",n())}),l(C,s)};D(X,C=>{g()?C(K):C(fe,!1)})}_(V),l(H,V)};D(N,H=>{y()?H(q):H(ce,!1)})}l(b,p),ve()}var Ut=z("<div><!></div>");function Le(b,e){const u=de(e,["children","$$slots","$$events","$$legacy"]),o=de(u,["class","noGutters","form","cols","inner"]);ue(e,!1);const w=oe();let f=c(e,"class",8,""),r=c(e,"noGutters",8,!1),i=c(e,"form",8,!1),y=c(e,"cols",8,0),g=c(e,"inner",12,void 0);function m(P){const x=parseInt(P);if(isNaN(x)){if(typeof P=="object")return["xs","sm","md","lg","xl"].map(a=>{const N=a==="xs"?"-":`-${a}-`,q=P[a];return typeof q=="number"&&q>0?`row-cols${N}${q}`:null}).filter(a=>!!a)}else if(x>0)return[`row-cols-${x}`];return[]}Ce(()=>(j(f()),j(r()),j(i()),j(y())),()=>{M(w,$e(f(),r()?"gx-0":null,i()?"form-row":"row",...m(y())))}),Ze(),Ke();var n=Ut();Me(n,()=>({...o,class:t(w)}));var I=h(n);ye(I,e,"default",{},null),_(n),St(n,P=>g(P),()=>g()),l(b,n),ve()}var Ht=He("<g><!></g>");function Xt(b,e){ue(e,!1);let u=870711;function o(){return u+=1,`fa-${u.toString(16)}`}let w=oe(""),f=c(e,"data",8);function r(g){if(!g||!g.raw)return"";let m=g.raw;const n={};return m=m.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(I,P)=>{const x=o();return n[P]=x,` id="${x}"`}),m=m.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(I,P,x,a)=>{const p=P||a;return!p||!n[p]?I:`#${n[p]}`}),m}Ce(()=>j(f()),()=>{M(w,r(f()))}),Ze();var i=Ht(),y=h(i);Tt(y,()=>t(w),!0),_(i),l(b,i),ve()}var Yt=He("<svg><!></svg>");function Gt(b,e){const u=de(e,["children","$$slots","$$events","$$legacy"]),o=de(u,["class","width","height","box","spin","inverse","pulse","flip","style","label"]);let w=c(e,"class",8,""),f=c(e,"width",8),r=c(e,"height",8),i=c(e,"box",8,"0 0 0 0"),y=c(e,"spin",8,!1),g=c(e,"inverse",8,!1),m=c(e,"pulse",8,!1),n=c(e,"flip",8,"none"),I=c(e,"style",8,""),P=c(e,"label",8,"");var x=Yt();Me(x,()=>({version:"1.1",class:`fa-icon ${w()??""}`,width:f(),height:r(),"aria-label":P(),role:P()?"img":"presentation",viewBox:i(),style:I(),...o,[Rt]:{"fa-spin":y(),"fa-pulse":m(),"fa-inverse":g(),"fa-flip-horizontal":n()==="horizontal","fa-flip-vertical":n()==="vertical"}}),void 0,void 0,void 0,"svelte-v67cny");var a=h(x);ye(a,e,"default",{},null),_(x),l(b,x)}var Lt=He("<path></path>"),Vt=He("<polygon></polygon>"),Ft=He("<!><!><!>",1);function De(b,e){const u=de(e,["children","$$slots","$$events","$$legacy"]),o=de(u,["class","data","scale","spin","inverse","pulse","flip","label","style"]);ue(e,!1);let w=c(e,"class",8,""),f=c(e,"data",8),r=oe(),i=c(e,"scale",8,1),y=c(e,"spin",8,!1),g=c(e,"inverse",8,!1),m=c(e,"pulse",8,!1),n=c(e,"flip",8,void 0),I=c(e,"label",8,""),P=c(e,"style",8,""),x=1,a=oe(10),p=oe(10),N=oe(),q=oe();function ce(s){let S,$;if(s)if("definition"in s){console.error("`import faIconName from '@fortawesome/package-name/faIconName` not supported - Please use `import { faIconName } from '@fortawesome/package-name/faIconName'` instead");return}else if("iconName"in s&&"icon"in s){S=s.iconName;const[v,O,,,Y]=s.icon,se=Array.isArray(Y)?Y:[Y];$={width:v,height:O,paths:se.map(Q=>({d:Q}))}}else S=Object.keys(s)[0],$=s[S];else return;return $}function H(){let s=1;return typeof i()<"u"&&(s=Number(i())),isNaN(s)||s<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),x):s*x}function V(){return t(r)?`0 0 ${t(r).width} ${t(r).height}`:`0 0 ${t(a)} ${t(p)}`}function X(){return t(r)?Math.max(t(r).width,t(r).height)/16:1}function K(){return t(r)?t(r).width/X()*H():0}function fe(){return t(r)?t(r).height/X()*H():0}function C(){let s="";P()!==null&&(s+=P());let S=H();return S===1?s.length===0?"":s:(s!==""&&!s.endsWith(";")&&(s+="; "),`${s}font-size: ${S}em`)}Ce(()=>(j(f()),j(P()),j(i())),()=>{M(r,ce(f())),P(),i(),M(a,K()),M(p,fe()),M(N,C()),M(q,V())}),Ze(),Ke(),Gt(b,vt({get label(){return I()},get width(){return t(a)},get height(){return t(p)},get box(){return t(q)},get style(){return t(N)},get spin(){return y()},get flip(){return n()},get inverse(){return g()},get pulse(){return m()},get class(){return w()}},()=>o,{children:(s,S)=>{var $=pe(),v=E($);ye(v,e,"default",{},O=>{var Y=Ft(),se=E(Y);Fe(se,1,()=>(t(r),Ve(()=>t(r)?.paths||[])),nt,(G,ee)=>{var F=Lt();Me(F,()=>({...t(ee)})),l(G,F)});var Q=k(se);Fe(Q,1,()=>(t(r),Ve(()=>t(r)?.polygons||[])),nt,(G,ee)=>{var F=Vt();Me(F,()=>({...t(ee)})),l(G,F)});var d=k(Q);{var re=G=>{Xt(G,{get data(){return t(r)},set data(ee){M(r,ee)},$$legacy:!0})};D(d,G=>{t(r),Ve(()=>t(r)?.raw)&&G(re)})}l(O,Y)}),l(s,$)},$$slots:{default:!0}})),ve()}const ct={edit:{width:1792,height:1792,paths:[{d:"M888 1184l116-116-152-152-116 116v56h96v96h56zM1328 464q-16-16-33 1l-350 350q-17 17-1 33t33-1l350-350q17-17 1-33zM1408 1058v190q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-14 14-32 8-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-126q0-13 9-22l64-64q15-15 35-7t20 29zM1312 320l288 288-672 672h-288v-288zM1756 452l-92 92-288-288 92-92q28-28 68-28t68 28l152 152q28 28 28 68t-28 68z"}]}},ot={plus:{width:1408,height:1792,paths:[{d:"M1408 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"}]}},Zt={trash:{width:1408,height:1792,paths:[{d:"M512 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zM768 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zM1024 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zM480 384h448l-48-117q-7-9-17-11h-317q-10 2-17 11zM1408 416v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"}]}};function Jt({inputTime:b,inputPages:e,previousPage:u,pageCount:o}){const w=Number.parseInt(b),f=Number.parseInt(e);return!b||b.length<1?{valid:!1,message:"Time read was empty"}:!e||e.length<1?{valid:!1,message:"Current page was empty"}:Object.is(f,"NaN")?{valid:!1,message:"Page number added is not a valid integer"}:Object.is(w,"NaN")?{valid:!1,message:"Number of minutes spent reading is not a valid integer"}:f<u?{valid:!1,message:"You can't read backwards. If you have to adjust the current page press the current page on the book card."}:o<f?{valid:!1,message:"You can't read more pages than there are in the book."}:{valid:!0}}function Kt({inputPages:b,pageCount:e}){const u=Number.parseInt(b);return!b||b.length<1?{valid:!1,message:"Page number is empty, and I don't like that one bit – no, sir, I don't."}:Object.is(u,NaN)?{valid:!1,message:"Page number is not a valid number."}:u<0||e<u?{valid:!1,message:"Page number must be between 0 and the total number of pages in the book."}:{valid:!0}}var Qt=z('<input id="inputTime" class="form-control" placeholder="Minutes of reading" type="number"/>'),Wt=z('<input id="inputPagesReading" class="form-control" type="number" placeholder="What page are you on"/>'),$t=z('<!> <div style="height: 8px;"></div> <!>',1);function ea(b,e){ue(e,!0);let u=ae(void 0),o=ae(void 0);function w(){console.log(t(u)+t(o));const{valid:r,message:i}=Jt({inputTime:t(u),inputPages:t(o),previousPage:e.book.currentPage,pageCount:e.book.pageCount});if(!r){alert(i);return}e.onaddReading({id:e.book.id,timeRead:t(u),currentPage:t(o),previousPage:e.book.currentPage}),e.oncloseModal()}function f(){e.oncloseModal()}{let r=Ie(()=>!!e.book);Je(b,{get open(){return t(r)},onclose:f,primaryText:"Add",primaryAction:w,get header(){return e.book.title},children:(i,y)=>{var g=$t(),m=E(g);je(m,{label:"Minutes read",inputId:"inputTime",children:(I,P)=>{var x=Qt();Oe(x),Ue(x,()=>t(u),a=>M(u,a)),l(I,x)},$$slots:{default:!0}});var n=k(m,4);je(n,{label:"Current page",inputId:"inputPagesReading",children:(I,P)=>{var x=Wt();Oe(x),Ue(x,()=>t(o),a=>M(o,a)),l(I,x)},$$slots:{default:!0}}),l(i,g)},$$slots:{default:!0}})}ve()}var ta=z('<input id="inputPages" class="form-control" type="number" placeholder="What page are you on"/>');function aa(b,e){ue(e,!0);let u=Ie(()=>!!e.book),o=ae(void 0);function w(){const{valid:f,message:r}=Kt({inputPages:t(o),pageCount:e.book.pageCount});if(!f){alert(r);return}e.onupdateCurrentPage({id:e.book.id,currentPage:Number.parseInt(t(o)),previousPage:e.book.currentPage}),e.oncloseModal()}Je(b,{get open(){return t(u)},onclose:()=>e.oncloseModal(),get header(){return e.book.title},primaryAction:w,primaryText:"Update page",children:(f,r)=>{je(f,{label:"Set current page",inputId:"inputPages",children:(i,y)=>{var g=ta();Oe(g),Ue(g,()=>t(o),m=>M(o,m)),l(i,g)},$$slots:{default:!0}})},$$slots:{default:!0}}),ve()}var sa=z('<input id="inputTime" class="form-control" placeholder="Minutes of reading" type="number"/>'),ra=z('<input id="inputToPage" class="form-control" type="number" placeholder="Ending page"/>'),na=z('<!> <div style="height: 8px;"></div> <div style="margin-bottom: 1rem;"><label style="font-size: 0.9rem; color: #666; display: block; margin-bottom: 0.25rem;">From page (cannot be changed)</label> <div style="padding: 0.5rem; background-color: #f5f5f5; border-radius: 4px; color: #666;"> </div></div> <!>',1);function la(b,e){ue(e,!0);let u=ae(Qe(e.session?.timeRead||0)),o=ae(Qe(e.session?.toPage||0));ut(()=>{e.session&&(M(u,e.session.timeRead,!0),M(o,e.session.toPage,!0))});function w(){if(t(u)<=0){alert("Time read must be greater than 0");return}if(t(o)<0){alert("Page numbers must be positive");return}if(t(o)<=e.session.fromPage){alert(`End page must be greater than start page (${e.session.fromPage})`);return}if(e.book&&t(o)>e.book.pageCount){alert(`Page number cannot exceed book's total pages (${e.book.pageCount})`);return}e.onupdateSession({sessionId:e.session.id,timeRead:t(u),fromPage:e.session.fromPage,toPage:t(o)}),e.oncloseModal()}function f(){e.oncloseModal()}{let r=Ie(()=>!!e.session);Je(b,{get open(){return t(r)},onclose:f,primaryText:"Update",primaryAction:w,header:"Edit Reading Session",children:(i,y)=>{var g=na(),m=E(g);je(m,{label:"Minutes read",inputId:"inputTime",children:(a,p)=>{var N=sa();Oe(N),Ue(N,()=>t(u),q=>M(u,q)),l(a,N)},$$slots:{default:!0}});var n=k(m,4),I=k(h(n),2),P=h(I,!0);_(I),_(n);var x=k(n,2);je(x,{label:"To page",inputId:"inputToPage",children:(a,p)=>{var N=ra();Oe(N),Ue(N,()=>t(o),q=>M(o,q)),l(a,N)},$$slots:{default:!0}}),le(()=>W(P,e.session?.fromPage||0)),l(i,g)},$$slots:{default:!0}})}ve()}var ia=z('<div class="empty-state svelte-4szxma">No reading sessions recorded yet.</div>'),oa=z('<span role="button" tabindex="0" class="edit-button svelte-4szxma"><!></span> <span role="button" tabindex="0" class="edit-button svelte-4szxma"><!></span>',1),da=z('<span class="button-spacer svelte-4szxma"></span> <span class="button-spacer svelte-4szxma"></span>',1),ua=z('<div class="session svelte-4szxma"><div class="session-header svelte-4szxma"><span class="session-date svelte-4szxma"> </span> <div class="session-time-container svelte-4szxma"><!> <span class="session-time svelte-4szxma"> </span></div></div> <div class="session-details svelte-4szxma"><div class="detail svelte-4szxma"><span class="detail-label svelte-4szxma">Pages:</span> <span> </span></div> <div class="detail svelte-4szxma"><span class="detail-label svelte-4szxma">Read:</span> <span> </span></div></div></div>'),va=z('<div class="sessions-container svelte-4szxma"><!></div>'),ca=z("<!> <!>",1);function fa(b,e){ue(e,!0);let u=Ie(()=>!!e.book),o=ae(Qe([]));ut(()=>{if(e.book&&e.userId)return ze.getReadingSessions(e.userId,e.book.id).subscribe(p=>{M(o,p,!0)})});let w=ae(null),f=Ie(()=>t(w)?t(o).find(a=>a.id===t(w)):null);function r(a){return a?.toDate?a.toDate().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function i(a){M(w,a.id,!0)}function y(a){ze.updateReadingSession({userId:e.userId,bookId:e.book.id,...a})}function g(){M(w,null)}function m(a){confirm("Are you sure you want to delete this reading session? This will update your book's progress accordingly.")&&ze.deleteReadingSession(e.userId,e.book.id,a.id)}var n=ca(),I=E(n);{let a=Ie(()=>e.book?`Reading Sessions - ${e.book.title}`:"Reading Sessions");Je(I,{get open(){return t(u)},onclose:()=>e.onclose(),get header(){return t(a)},primaryAction:()=>e.onclose(),primaryText:"Close",hideSecondary:!0,children:(p,N)=>{var q=va(),ce=h(q);{var H=X=>{var K=ia();l(X,K)},V=X=>{var K=pe(),fe=E(K);Fe(fe,19,()=>t(o),C=>C.id,(C,s,S)=>{var $=ua(),v=h($),O=h(v),Y=h(O,!0);_(O);var se=k(O,2),Q=h(se);{var d=T=>{var Z=oa(),B=E(Z);B.__click=()=>i(t(s));var me=h(B);De(me,{get data(){return ct},scale:"0.8",style:"color: #666;"}),_(B);var te=k(B,2);te.__click=()=>m(t(s));var L=h(te);De(L,{get data(){return Zt},scale:"0.8",style:"color: #d9534f;"}),_(te),we("keypress",B,U=>U.key==="Enter"&&i(t(s))),we("keypress",te,U=>U.key==="Enter"&&m(t(s))),l(T,Z)},re=T=>{var Z=da();kt(2),l(T,Z)};D(Q,T=>{t(S)===0?T(d):T(re,!1)})}var G=k(Q,2),ee=h(G,!0);_(G),_(se),_(v);var F=k(v,2),Se=h(F),ie=k(h(Se),2),Te=h(ie);_(ie),_(Se);var be=k(Se,2),xe=k(h(be),2),ge=h(xe);_(xe),_(be),_(F),_($),le((T,Z)=>{W(Y,T),W(ee,Z),W(Te,`${t(s).fromPage??""} → ${t(s).toPage??""}`),W(ge,`${t(s).pagesRead??""} pages`)},[()=>r(t(s).createdAt),()=>We(t(s).timeRead)]),l(C,$)}),l(X,K)};D(ce,X=>{t(o).length===0?X(H):X(V,!1)})}_(q),l(p,q)},$$slots:{default:!0}})}var P=k(I,2);{var x=a=>{la(a,{get session(){return t(f)},get book(){return e.book},onupdateSession:y,oncloseModal:g})};D(P,a=>{t(f)&&a(x)})}l(b,n),ve()}dt(["click"]);var ga=z('<div class="menu svelte-a7k8bh">Hello</div>');function ma(b,e){var u=ga();le(()=>et(u,`left: ${e.x}px; top: ${e.y}px;`)),l(b,u)}var ha=z('<span class="label svelte-1l34oh7">Book Title</span> <span role="button" tabindex="0" style="cursor: pointer; margin-left: 0.5em;"><!></span> <br/> <span class="author svelte-1l34oh7"> </span> <br/> <span class="title svelte-1l34oh7"> </span>',1),_a=z('<div role="button" tabindex="0" class="text-right svelte-1l34oh7" style="cursor: pointer;"><span class="label svelte-1l34oh7">Page</span> <br/> <span class="page-number svelte-1l34oh7"> </span></div>'),pa=z('<div role="button" tabindex="0" class="text-right clickable svelte-1l34oh7" style="cursor: pointer;"><span class="label svelte-1l34oh7">Time read</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),ba=z('<div class="text-right svelte-1l34oh7"><span class="label svelte-1l34oh7">Est left</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),xa=z('<div class="text-right svelte-1l34oh7"><span class="label svelte-1l34oh7">Min/Page</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),ya=z("<!> <!> <!> <!>",1),Pa=z('<div role="button" tabindex="0" style="height: 100%; text-align: center;"><!></div>'),ka=z("<!> <!> <!>",1),wa=z('<div class="progress-container svelte-1l34oh7"><!> <div class="progress-text-black svelte-1l34oh7"> </div> <div class="progress-text-white svelte-1l34oh7"> </div></div>'),za=z('<div role="button" tabindex="0" style="height: 100%; text-align: center;"><!></div>'),Ia=z('<div class="book-row svelte-1l34oh7"><!> <div class="v-spacer svelte-1l34oh7"></div> <!> <!></div>'),Ma=z("<!> <!> <!> <!>",1);function Ba(b,e){ue(e,!0);const u=()=>It(x,"$books",o),[o,w]=zt();let f=ae(void 0),r=ae(null),i=ae(null),y=ae(null);const g=(v,O)=>{M(i,v,!0),M(y,O,!0)},m=()=>M(i,null);let n=ae(null);const I=v=>M(n,v,!0),P=()=>M(n,null);let x=ze.getBooks(e.userId,e.finished);function a(v){return v.pagesRead!==0&&v.timeRead!==0}function p(v){ze.addReading({userId:e.userId,...v})}function N(v){ze.addPageUpdate({userId:e.userId,...v})}function q(v){confirm("Are you sure you want to delete this book?")&&ze.deleteBook(e.userId,v)}function ce(v){console.log(v),v.preventDefault();const{x:O,y:Y}=v;M(r,{x:O,y:Y},!0)}var H=Ma(),V=E(H);{var X=v=>{ma(v,vt(()=>t(r)))};D(V,v=>{t(r)&&v(X)})}var K=k(V,2);{var fe=v=>{ea(v,{get book(){return t(i)},onaddReading:p,oncloseModal:m})},C=v=>{var O=pe(),Y=E(O);{var se=d=>{aa(d,{get book(){return t(i)},onupdateCurrentPage:N,oncloseModal:m})},Q=d=>{var re=pe(),G=E(re);{var ee=F=>{wt(F,{open:!0,get userId(){return e.userId},get book(){return t(i)},onclose:m})};D(G,F=>{t(i)&&t(y)==="editBook"&&F(ee)},!0)}l(d,re)};D(Y,d=>{t(i)&&t(y)==="updatePage"?d(se):d(Q,!1)},!0)}l(v,O)};D(K,v=>{t(i)&&t(y)==="addReading"?v(fe):v(C,!1)})}var s=k(K,2);{var S=v=>{fa(v,{get book(){return t(n)},get userId(){return e.userId},onclose:P})};D(s,v=>{t(n)&&v(S)})}var $=k(s,2);Ct($,{children:(v,O)=>{var Y=pe(),se=E(Y);Fe(se,1,u,Q=>Q.id,(Q,d)=>{var re=Ia();re.__contextmenu=ce;var G=h(re);Le(G,{children:(ie,Te)=>{var be=ka(),xe=E(be);_e(xe,{children:(B,me)=>{var te=ha(),L=E(te);L.__dblclick=()=>q(t(d).id);var U=k(L,2);U.__click=()=>g(t(d),"editBook");var qe=h(U);De(qe,{get data(){return ct},scale:"0.8",style:"color: #666;"}),_(U);var Re=k(U,4),Xe=h(Re);_(Re);var Ye=k(Re,4),he=h(Ye,!0);_(Ye),le(()=>{W(Xe,`${t(d).author??""}:`),W(he,t(d).title)}),we("keypress",U,Ae=>Ae.key==="Enter"&&g(t(d),"editBook")),l(B,te)},$$slots:{default:!0}});var ge=k(xe,2);_e(ge,{md:"6",children:(B,me)=>{Le(B,{children:(te,L)=>{var U=ya(),qe=E(U);_e(qe,{children:(he,Ae)=>{var A=_a();A.__click=()=>g(t(d),"updatePage");var ne=k(h(A),4),Pe=h(ne);_(ne),_(A),le(()=>W(Pe,`${t(d).currentPage??""}/${t(d).pageCount??""}`)),we("keypress",A,ke=>ke.key==="Enter"&&g(t(d),"updatePage")),l(he,A)},$$slots:{default:!0}});var Re=k(qe,2);_e(Re,{children:(he,Ae)=>{var A=pa();A.__click=()=>I(t(d));var ne=k(h(A),4),Pe=h(ne);{var ke=R=>{var J=Ne();le(Be=>W(J,Be),[()=>We(t(d).timeRead)]),l(R,J)},Ee=R=>{var J=Ne("NA");l(R,J)};D(Pe,R=>{a(t(d))?R(ke):R(Ee,!1)})}_(ne),_(A),we("keypress",A,R=>R.key==="Enter"&&I(t(d))),l(he,A)},$$slots:{default:!0}});var Xe=k(Re,2);_e(Xe,{children:(he,Ae)=>{var A=ba(),ne=k(h(A),4),Pe=h(ne);{var ke=R=>{var J=Ne();le(Be=>W(J,Be),[()=>We(Math.round((t(d).pageCount-t(d).currentPage)*(t(d).timeRead/t(d).pagesRead)))]),l(R,J)},Ee=R=>{var J=Ne("NA");l(R,J)};D(Pe,R=>{a(t(d))?R(ke):R(Ee,!1)})}_(ne),_(A),l(he,A)},$$slots:{default:!0}});var Ye=k(Xe,2);_e(Ye,{children:(he,Ae)=>{var A=xa(),ne=k(h(A),4),Pe=h(ne);{var ke=R=>{var J=Ne();le(Be=>W(J,Be),[()=>Math.round(t(d).timeRead/t(d).pagesRead*100)/100]),l(R,J)},Ee=R=>{var J=Ne("NA");l(R,J)};D(Pe,R=>{a(t(d))?R(ke):R(Ee,!1)})}_(ne),_(A),l(he,A)},$$slots:{default:!0}}),l(te,U)},$$slots:{default:!0}})},$$slots:{default:!0}});var T=k(ge,2);{var Z=B=>{_e(B,{md:"1",children:(me,te)=>{var L=Pa();L.__click=()=>g(t(d),"addReading");var U=h(L);De(U,{get data(){return ot},scale:"1.7",style:"margin: auto; top: 25%; position: relative; cursor: pointer;"}),_(L),we("keypress",L,qe=>qe.key==="Enter"&&g(t(d),"addReading")),l(me,L)},$$slots:{default:!0}})};D(T,B=>{!e.finished&&t(f)>770&&B(Z)})}l(ie,be)},$$slots:{default:!0}});var ee=k(G,4);Le(ee,{children:(ie,Te)=>{_e(ie,{children:(be,xe)=>{var ge=wa(),T=h(ge);{let L=Ie(()=>t(d).currentPage/t(d).pageCount*100);Ot(T,{color:"danger",get value(){return t(L)}})}var Z=k(T,2),B=h(Z);_(Z);var me=k(Z,2),te=h(me);_(me),_(ge),le((L,U)=>{W(B,`${L??""}%`),et(me,`clip-path: inset(0 ${100-t(d).currentPage/t(d).pageCount*100}% 0 0);`),W(te,`${U??""}%`)},[()=>Math.round(t(d).currentPage/t(d).pageCount*100),()=>Math.round(t(d).currentPage/t(d).pageCount*100)]),l(be,ge)},$$slots:{default:!0}})},$$slots:{default:!0}});var F=k(ee,2);{var Se=ie=>{Le(ie,{children:(Te,be)=>{_e(Te,{children:(xe,ge)=>{var T=za();T.__click=()=>g(t(d),"addReading");var Z=h(T);De(Z,{get data(){return ot},scale:"1.3",style:"margin: auto; top: 25%; position: relative; cursor: pointer;"}),_(T),we("keypress",T,B=>B.key==="Enter"&&g(t(d),"addReading")),l(xe,T)},$$slots:{default:!0}})},$$slots:{default:!0}})};D(F,ie=>{!e.finished&&t(f)<=770&&ie(Se)})}_(re),l(Q,re)}),l(v,Y)},$$slots:{default:!0}}),At("innerWidth",v=>M(f,v,!0)),l(b,H),ve(),w()}dt(["contextmenu","dblclick","click"]);export{Ba as B};
