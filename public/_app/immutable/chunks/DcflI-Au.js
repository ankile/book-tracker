import{b as tt,g as ft,f as I,a as s,c as _e,i as Oe,d as dt,s as te,e as Ne,t as Me}from"./CQ5d6LE4.js";import{A as oe,H as at,M as st,a3 as gt,aY as mt,I as rt,ak as ht,av as _t,aX as pt,aU as bt,R as xt,aj as Xe,aZ as yt,aM as Pt,p as ve,u as Ge,w as x,x as y,a as ce,ae as ze,t as R,V as de,k as j,af as Je,f as O,j as t,v as k,s as Z,z as Ae,o as Le,b as ut}from"./CmTovZ1L.js";import{e as Ze,i as nt,M as Ke,I as Se,D as Ce,f as We,N as wt}from"./YcjBFfZz.js";import{l as ue,p as g,i as D,b as vt,s as kt,a as It}from"./CB2o9Wn4.js";import{a as ke,b as pe,g as Rt,t as Mt,v as et,f as lt,C as Nt,r as qe,c as Te}from"./DJTghN07.js";import{i as Qe}from"./DcMRWZqb.js";import{i as Ct,g as it,c as $e,C as zt}from"./vvNMJBZR.js";import{b as St}from"./DEzKOhsJ.js";function qt(P,e,u=!1,v=!1,p=!1){var h=P,a="";oe(()=>{var i=gt;if(a===(a=e()??"")){at&&st();return}if(i.nodes_start!==null&&(mt(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),a!==""){if(at){rt.data;for(var w=st(),_=w;w!==null&&(w.nodeType!==ht||w.data!=="");)_=w,w=_t(w);if(w===null)throw pt(),bt;tt(rt,_),h=xt(w);return}var m=a+"";u?m=`<svg>${m}</svg>`:v&&(m=`<math>${m}</math>`);var r=ft(m);if((u||v)&&(r=Xe(r)),tt(Xe(r),r.lastChild),u||v)for(;Xe(r);)h.before(Xe(r));else h.before(r)}})}function Tt(P,e){yt(window,["resize"],()=>Pt(()=>e(window[P])))}var At=I("<div><!></div>");function he(P,e){const u=ue(e,["children","$$slots","$$events","$$legacy"]),v=ue(u,["class","xs","sm","md","lg","xl","xxl"]);ve(e,!1);let p=g(e,"class",8,""),h=g(e,"xs",8,void 0),a=g(e,"sm",8,void 0),i=g(e,"md",8,void 0),w=g(e,"lg",8,void 0),_=g(e,"xl",8,void 0),m=g(e,"xxl",8,void 0);const r=[],M={xs:h(),sm:a(),md:i(),lg:w(),xl:_(),xxl:m()};Object.keys(M).forEach(b=>{const d=M[b];if(!d&&d!=="")return;const z=b==="xs";if(Ct(d)){const A=z?"-":`-${b}-`,fe=it(z,b,d.size);(d.size||d.size==="")&&r.push(fe),d.push&&r.push(`push${A}${d.push}`),d.pull&&r.push(`pull${A}${d.pull}`),d.offset&&r.push(`offset${A}${d.offset}`),d.order&&r.push(`order${A}${d.order}`)}else r.push(it(z,b,d))}),r.length||r.push("col"),p()&&r.push(p()),Qe();var o=At();ke(o,b=>({...v,class:b}),[()=>Ge(()=>r.join(" "))]);var c=x(o);pe(c,e,"default",{},null),y(o),s(P,o),ce()}var Et=I("<div><!></div>"),Bt=I('<div role="progressbar" aria-valuemin="0"><!></div>'),Dt=I("<div><!></div>");function jt(P,e){const u=ue(e,["children","$$slots","$$events","$$legacy"]),v=ue(u,["class","bar","multi","value","max","animated","striped","color","barClassName"]);ve(e,!1);const p=de(),h=de(),a=de();let i=g(e,"class",8,""),w=g(e,"bar",8,!1),_=g(e,"multi",8,!1),m=g(e,"value",8,0),r=g(e,"max",8,100),M=g(e,"animated",8,!1),o=g(e,"striped",8,!1),c=g(e,"color",8,""),b=g(e,"barClassName",8,"");ze(()=>j(i()),()=>{R(p,$e(i(),"progress"))}),ze(()=>(j(w()),j(i()),j(b()),j(M()),j(c()),j(o())),()=>{R(h,$e("progress-bar",w()&&i()||b(),M()?"progress-bar-animated":null,c()?`text-bg-${c()}`:null,o()||M()?"progress-bar-striped":null))}),ze(()=>(j(m()),j(r())),()=>{R(a,parseInt(m(),10)/parseInt(r(),10)*100)}),Je(),Qe();var d=_e(),z=O(d);{var A=S=>{var E=_e(),ne=O(E);{var J=q=>{var n=_e(),C=O(n);pe(C,e,"default",{},null),s(q,n)},F=q=>{var n=Et();ke(n,()=>({...v,class:t(h),style:`width: ${t(a)??""}%`,role:"progressbar","aria-valuenow":m(),"aria-valuemin":"0","aria-valuemax":r()}));var C=x(n);pe(C,e,"default",{},null),y(n),s(q,n)};D(ne,q=>{_()?q(J):q(F,!1)})}s(S,E)},fe=S=>{var E=Dt();ke(E,()=>({...v,class:t(p)}));var ne=x(E);{var J=q=>{var n=_e(),C=O(n);pe(C,e,"default",{},null),s(q,n)},F=q=>{var n=Bt(),C=x(n);pe(C,e,"default",{},null),y(n),oe(()=>{Rt(n,1,Mt(t(h))),et(n,`width: ${t(a)??""}%`),lt(n,"aria-valuenow",m()),lt(n,"aria-valuemax",r())}),s(q,n)};D(ne,q=>{_()?q(J):q(F,!1)})}y(E),s(S,E)};D(z,S=>{w()?S(A):S(fe,!1)})}s(P,d),ce()}var Ot=I("<div><!></div>");function Ye(P,e){const u=ue(e,["children","$$slots","$$events","$$legacy"]),v=ue(u,["class","noGutters","form","cols","inner"]);ve(e,!1);const p=de();let h=g(e,"class",8,""),a=g(e,"noGutters",8,!1),i=g(e,"form",8,!1),w=g(e,"cols",8,0),_=g(e,"inner",12,void 0);function m(o){const c=parseInt(o);if(isNaN(c)){if(typeof o=="object")return["xs","sm","md","lg","xl"].map(b=>{const z=b==="xs"?"-":`-${b}-`,A=o[b];return typeof A=="number"&&A>0?`row-cols${z}${A}`:null}).filter(b=>!!b)}else if(c>0)return[`row-cols-${c}`];return[]}ze(()=>(j(h()),j(a()),j(i()),j(w())),()=>{R(p,$e(h(),a()?"gx-0":null,i()?"form-row":"row",...m(w())))}),Je(),Qe();var r=Ot();ke(r,()=>({...v,class:t(p)}));var M=x(r);pe(M,e,"default",{},null),y(r),St(r,o=>_(o),()=>_()),s(P,r),ce()}var Ut=Oe("<g><!></g>");function Ft(P,e){ve(e,!1);let u=870711;function v(){return u+=1,`fa-${u.toString(16)}`}let p=de(""),h=g(e,"data",8);function a(_){if(!_||!_.raw)return"";let m=_.raw;const r={};return m=m.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(M,o)=>{const c=v();return r[o]=c,` id="${c}"`}),m=m.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(M,o,c,b)=>{const d=o||b;return!d||!r[d]?M:`#${r[d]}`}),m}ze(()=>j(h()),()=>{R(p,a(h()))}),Je();var i=Ut(),w=x(i);qt(w,()=>t(p),!0),y(i),s(P,i),ce()}var Ht=Oe("<svg><!></svg>");function Xt(P,e){const u=ue(e,["children","$$slots","$$events","$$legacy"]),v=ue(u,["class","width","height","box","spin","inverse","pulse","flip","style","label"]);let p=g(e,"class",8,""),h=g(e,"width",8),a=g(e,"height",8),i=g(e,"box",8,"0 0 0 0"),w=g(e,"spin",8,!1),_=g(e,"inverse",8,!1),m=g(e,"pulse",8,!1),r=g(e,"flip",8,"none"),M=g(e,"style",8,""),o=g(e,"label",8,"");var c=Ht();ke(c,()=>({version:"1.1",class:`fa-icon ${p()??""}`,width:h(),height:a(),"aria-label":o(),role:o()?"img":"presentation",viewBox:i(),style:M(),...v,[Nt]:{"fa-spin":w(),"fa-pulse":m(),"fa-inverse":_(),"fa-flip-horizontal":r()==="horizontal","fa-flip-vertical":r()==="vertical"}}),void 0,void 0,void 0,"svelte-v67cny");var b=x(c);pe(b,e,"default",{},null),y(c),s(P,c)}var Yt=Oe("<path></path>"),Gt=Oe("<polygon></polygon>"),Lt=Oe("<!><!><!>",1);function Ve(P,e){const u=ue(e,["children","$$slots","$$events","$$legacy"]),v=ue(u,["class","data","scale","spin","inverse","pulse","flip","label","style"]);ve(e,!1);let p=g(e,"class",8,""),h=g(e,"data",8),a=de(),i=g(e,"scale",8,1),w=g(e,"spin",8,!1),_=g(e,"inverse",8,!1),m=g(e,"pulse",8,!1),r=g(e,"flip",8,void 0),M=g(e,"label",8,""),o=g(e,"style",8,""),c=1,b=de(10),d=de(10),z=de(),A=de();function fe(n){let C,K;if(n)if("definition"in n){console.error("`import faIconName from '@fortawesome/package-name/faIconName` not supported - Please use `import { faIconName } from '@fortawesome/package-name/faIconName'` instead");return}else if("iconName"in n&&"icon"in n){C=n.iconName;const[f,H,,,B]=n.icon,le=Array.isArray(B)?B:[B];K={width:f,height:H,paths:le.map(Q=>({d:Q}))}}else C=Object.keys(n)[0],K=n[C];else return;return K}function S(){let n=1;return typeof i()<"u"&&(n=Number(i())),isNaN(n)||n<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),c):n*c}function E(){return t(a)?`0 0 ${t(a).width} ${t(a).height}`:`0 0 ${t(b)} ${t(d)}`}function ne(){return t(a)?Math.max(t(a).width,t(a).height)/16:1}function J(){return t(a)?t(a).width/ne()*S():0}function F(){return t(a)?t(a).height/ne()*S():0}function q(){let n="";o()!==null&&(n+=o());let C=S();return C===1?n.length===0?"":n:(n!==""&&!n.endsWith(";")&&(n+="; "),`${n}font-size: ${C}em`)}ze(()=>(j(h()),j(o()),j(i())),()=>{R(a,fe(h())),o(),i(),R(b,J()),R(d,F()),R(z,q()),R(A,E())}),Je(),Qe(),Xt(P,vt({get label(){return M()},get width(){return t(b)},get height(){return t(d)},get box(){return t(A)},get style(){return t(z)},get spin(){return w()},get flip(){return r()},get inverse(){return _()},get pulse(){return m()},get class(){return p()}},()=>v,{children:(n,C)=>{var K=_e(),f=O(K);pe(f,e,"default",{},H=>{var B=Lt(),le=O(B);Ze(le,1,()=>(t(a),Ge(()=>t(a)?.paths||[])),nt,(U,Y)=>{var G=Yt();ke(G,()=>({...t(Y)})),s(U,G)});var Q=k(le);Ze(Q,1,()=>(t(a),Ge(()=>t(a)?.polygons||[])),nt,(U,Y)=>{var G=Gt();ke(G,()=>({...t(Y)})),s(U,G)});var l=k(Q);{var W=U=>{Ft(U,{get data(){return t(a)},set data(Y){R(a,Y)},$$legacy:!0})};D(l,U=>{t(a),Ge(()=>t(a)?.raw)&&U(W)})}s(H,B)}),s(n,K)},$$slots:{default:!0}})),ce()}const ct={edit:{width:1792,height:1792,paths:[{d:"M888 1184l116-116-152-152-116 116v56h96v96h56zM1328 464q-16-16-33 1l-350 350q-17 17-1 33t33-1l350-350q17-17 1-33zM1408 1058v190q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-14 14-32 8-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-126q0-13 9-22l64-64q15-15 35-7t20 29zM1312 320l288 288-672 672h-288v-288zM1756 452l-92 92-288-288 92-92q28-28 68-28t68 28l152 152q28 28 28 68t-28 68z"}]}},ot={plus:{width:1408,height:1792,paths:[{d:"M1408 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"}]}};function Vt({inputTime:P,inputPages:e,previousPage:u,pageCount:v}){const p=Number.parseInt(P),h=Number.parseInt(e);return!P||P.length<1?{valid:!1,message:"Time read was empty"}:!e||e.length<1?{valid:!1,message:"Current page was empty"}:Object.is(h,"NaN")?{valid:!1,message:"Page number added is not a valid integer"}:Object.is(p,"NaN")?{valid:!1,message:"Number of minutes spent reading is not a valid integer"}:h<u?{valid:!1,message:"You can't read backwards. If you have to adjust the current page press the current page on the book card."}:v<h?{valid:!1,message:"You can't read more pages than there are in the book."}:{valid:!0}}function Zt({inputPages:P,pageCount:e}){const u=Number.parseInt(P);return!P||P.length<1?{valid:!1,message:"Page number is empty, and I don't like that one bit – no, sir, I don't."}:Object.is(u,NaN)?{valid:!1,message:"Page number is not a valid number."}:u<0||e<u?{valid:!1,message:"Page number must be between 0 and the total number of pages in the book."}:{valid:!0}}var Jt=I('<input id="inputTime" class="form-control" placeholder="Minutes of reading" type="number"/>'),Kt=I('<input id="inputPagesReading" class="form-control" type="number" placeholder="What page are you on"/>'),Qt=I('<!> <div style="height: 8px;"></div> <!>',1);function Wt(P,e){ve(e,!0);let u=Z(void 0),v=Z(void 0);function p(){console.log(t(u)+t(v));const{valid:a,message:i}=Vt({inputTime:t(u),inputPages:t(v),previousPage:e.book.currentPage,pageCount:e.book.pageCount});if(!a){alert(i);return}e.onaddReading({id:e.book.id,timeRead:t(u),currentPage:t(v),previousPage:e.book.currentPage}),e.oncloseModal()}function h(){e.oncloseModal()}{let a=Ae(()=>!!e.book);Ke(P,{get open(){return t(a)},onclose:h,primaryText:"Add",primaryAction:p,get header(){return e.book.title},children:(i,w)=>{var _=Qt(),m=O(_);Se(m,{label:"Minutes read",inputId:"inputTime",children:(M,o)=>{var c=Jt();qe(c),Te(c,()=>t(u),b=>R(u,b)),s(M,c)},$$slots:{default:!0}});var r=k(m,4);Se(r,{label:"Current page",inputId:"inputPagesReading",children:(M,o)=>{var c=Kt();qe(c),Te(c,()=>t(v),b=>R(v,b)),s(M,c)},$$slots:{default:!0}}),s(i,_)},$$slots:{default:!0}})}ce()}var $t=I('<input id="inputPages" class="form-control" type="number" placeholder="What page are you on"/>');function ea(P,e){ve(e,!0);let u=Ae(()=>!!e.book),v=Z(void 0);function p(){const{valid:h,message:a}=Zt({inputPages:t(v),pageCount:e.book.pageCount});if(!h){alert(a);return}e.onupdateCurrentPage({id:e.book.id,currentPage:Number.parseInt(t(v)),previousPage:e.book.currentPage}),e.oncloseModal()}Ke(P,{get open(){return t(u)},onclose:()=>e.oncloseModal(),get header(){return e.book.title},primaryAction:p,primaryText:"Update page",children:(h,a)=>{Se(h,{label:"Set current page",inputId:"inputPages",children:(i,w)=>{var _=$t();qe(_),Te(_,()=>t(v),m=>R(v,m)),s(i,_)},$$slots:{default:!0}})},$$slots:{default:!0}}),ce()}var ta=I('<input id="inputTime" class="form-control" placeholder="Minutes of reading" type="number"/>'),aa=I('<input id="inputFromPage" class="form-control" type="number" placeholder="Starting page"/>'),sa=I('<input id="inputToPage" class="form-control" type="number" placeholder="Ending page"/>'),ra=I('<!> <div style="height: 8px;"></div> <!> <div style="height: 8px;"></div> <!>',1);function na(P,e){ve(e,!0);let u=Z(Le(e.session?.timeRead||0)),v=Z(Le(e.session?.fromPage||0)),p=Z(Le(e.session?.toPage||0));ut(()=>{e.session&&(R(u,e.session.timeRead,!0),R(v,e.session.fromPage,!0),R(p,e.session.toPage,!0))});function h(){if(t(u)<=0){alert("Time read must be greater than 0");return}if(t(v)<0||t(p)<0){alert("Page numbers must be positive");return}if(t(p)<=t(v)){alert("End page must be greater than start page");return}if(e.book&&(t(v)>e.book.pageCount||t(p)>e.book.pageCount)){alert(`Page numbers cannot exceed book's total pages (${e.book.pageCount})`);return}if(e.book&&e.session.toPage!==e.book.currentPage){alert("Only the most recent reading session can be edited");return}e.onupdateSession({sessionId:e.session.id,timeRead:t(u),fromPage:t(v),toPage:t(p)}),e.oncloseModal()}function a(){e.oncloseModal()}{let i=Ae(()=>!!e.session);Ke(P,{get open(){return t(i)},onclose:a,primaryText:"Update",primaryAction:h,header:"Edit Reading Session",children:(w,_)=>{var m=ra(),r=O(m);Se(r,{label:"Minutes read",inputId:"inputTime",children:(c,b)=>{var d=ta();qe(d),Te(d,()=>t(u),z=>R(u,z)),s(c,d)},$$slots:{default:!0}});var M=k(r,4);Se(M,{label:"From page",inputId:"inputFromPage",children:(c,b)=>{var d=aa();qe(d),Te(d,()=>t(v),z=>R(v,z)),s(c,d)},$$slots:{default:!0}});var o=k(M,4);Se(o,{label:"To page",inputId:"inputToPage",children:(c,b)=>{var d=sa();qe(d),Te(d,()=>t(p),z=>R(p,z)),s(c,d)},$$slots:{default:!0}}),s(w,m)},$$slots:{default:!0}})}ce()}var la=I('<div class="empty-state svelte-4szxma">No reading sessions recorded yet.</div>'),ia=I('<span role="button" tabindex="0" class="edit-button svelte-4szxma"><!></span>'),oa=I('<div class="session svelte-4szxma"><div class="session-header svelte-4szxma"><span class="session-date svelte-4szxma"> </span> <div class="session-time-container svelte-4szxma"><span class="session-time svelte-4szxma"> </span> <!></div></div> <div class="session-details svelte-4szxma"><div class="detail svelte-4szxma"><span class="detail-label svelte-4szxma">Pages:</span> <span> </span></div> <div class="detail svelte-4szxma"><span class="detail-label svelte-4szxma">Read:</span> <span> </span></div></div></div>'),da=I('<div class="sessions-container svelte-4szxma"><!></div>'),ua=I("<!> <!>",1);function va(P,e){ve(e,!0);let u=Ae(()=>!!e.book),v=Z(Le([]));ut(()=>{if(e.book&&e.userId)return Ce.getReadingSessions(e.userId,e.book.id).subscribe(c=>{R(v,c,!0)})});let p=Z(null);function h(o){return o?.toDate?o.toDate().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function a(o){R(p,o,!0)}function i(o){Ce.updateReadingSession({userId:e.userId,bookId:e.book.id,...o})}function w(){R(p,null)}var _=ua(),m=O(_);{let o=Ae(()=>e.book?`Reading Sessions - ${e.book.title}`:"Reading Sessions");Ke(m,{get open(){return t(u)},onclose:()=>e.onclose(),get header(){return t(o)},primaryAction:()=>e.onclose(),primaryText:"Close",hideSecondary:!0,children:(c,b)=>{var d=da(),z=x(d);{var A=S=>{var E=la();s(S,E)},fe=S=>{var E=_e(),ne=O(E);Ze(ne,19,()=>t(v),J=>J.id,(J,F,q)=>{var n=oa(),C=x(n),K=x(C),f=x(K,!0);y(K);var H=k(K,2),B=x(H),le=x(B,!0);y(B);var Q=k(B,2);{var l=ae=>{var L=ia();L.__click=()=>a(t(F));var ge=x(L);Ve(ge,{get data(){return ct},scale:"0.8",style:"color: #666;"}),y(L),Ne("keypress",L,$=>$.key==="Enter"&&a(t(F))),s(ae,L)};D(Q,ae=>{t(q)===0&&ae(l)})}y(H),y(C);var W=k(C,2),U=x(W),Y=k(x(U),2),G=x(Y);y(Y),y(U);var Ue=k(U,2),ie=k(x(Ue),2),Ee=x(ie);y(ie),y(Ue),y(W),y(n),oe((ae,L)=>{te(f,ae),te(le,L),te(G,`${t(F).fromPage??""} → ${t(F).toPage??""}`),te(Ee,`${t(F).pagesRead??""} pages`)},[()=>h(t(F).createdAt),()=>We(t(F).timeRead)]),s(J,n)}),s(S,E)};D(z,S=>{t(v).length===0?S(A):S(fe,!1)})}y(d),s(c,d)},$$slots:{default:!0}})}var r=k(m,2);{var M=o=>{na(o,{get session(){return t(p)},get book(){return e.book},onupdateSession:i,oncloseModal:w})};D(r,o=>{t(p)&&o(M)})}s(P,_),ce()}dt(["click"]);var ca=I('<div class="menu svelte-a7k8bh">Hello</div>');function fa(P,e){var u=ca();oe(()=>et(u,`left: ${e.x}px; top: ${e.y}px;`)),s(P,u)}var ga=I('<span class="label svelte-1l34oh7">Book Title</span> <span role="button" tabindex="0" style="cursor: pointer; margin-left: 0.5em;"><!></span> <br/> <span class="author svelte-1l34oh7"> </span> <br/> <span class="title svelte-1l34oh7"> </span>',1),ma=I('<div role="button" tabindex="0" class="text-right svelte-1l34oh7" style="cursor: pointer;"><span class="label svelte-1l34oh7">Page</span> <br/> <span class="page-number svelte-1l34oh7"> </span></div>'),ha=I('<div role="button" tabindex="0" class="text-right clickable svelte-1l34oh7" style="cursor: pointer;"><span class="label svelte-1l34oh7">Time read</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),_a=I('<div class="text-right svelte-1l34oh7"><span class="label svelte-1l34oh7">Est left</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),pa=I('<div class="text-right svelte-1l34oh7"><span class="label svelte-1l34oh7">Min/Page</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),ba=I("<!> <!> <!> <!>",1),xa=I('<div role="button" tabindex="0" style="height: 100%; text-align: center;"><!></div>'),ya=I("<!> <!> <!>",1),Pa=I('<div class="progress-container svelte-1l34oh7"><!> <div class="progress-text-black svelte-1l34oh7"> </div> <div class="progress-text-white svelte-1l34oh7"> </div></div>'),wa=I('<div role="button" tabindex="0" style="height: 100%; text-align: center;"><!></div>'),ka=I('<div class="book-row svelte-1l34oh7"><!> <div class="v-spacer svelte-1l34oh7"></div> <!> <!></div>'),Ia=I("<!> <!> <!> <!>",1);function Aa(P,e){ve(e,!0);const u=()=>It(c,"$books",v),[v,p]=kt();let h=Z(void 0),a=Z(null),i=Z(null),w=Z(null);const _=(f,H)=>{R(i,f,!0),R(w,H,!0)},m=()=>R(i,null);let r=Z(null);const M=f=>R(r,f,!0),o=()=>R(r,null);let c=Ce.getBooks(e.userId,e.finished);function b(f){return f.pagesRead!==0&&f.timeRead!==0}function d(f){Ce.addReading({userId:e.userId,...f})}function z(f){Ce.addPageUpdate({userId:e.userId,...f})}function A(f){confirm("Are you sure you want to delete this book?")&&Ce.deleteBook(e.userId,f)}function fe(f){console.log(f),f.preventDefault();const{x:H,y:B}=f;R(a,{x:H,y:B},!0)}var S=Ia(),E=O(S);{var ne=f=>{fa(f,vt(()=>t(a)))};D(E,f=>{t(a)&&f(ne)})}var J=k(E,2);{var F=f=>{Wt(f,{get book(){return t(i)},onaddReading:d,oncloseModal:m})},q=f=>{var H=_e(),B=O(H);{var le=l=>{ea(l,{get book(){return t(i)},onupdateCurrentPage:z,oncloseModal:m})},Q=l=>{var W=_e(),U=O(W);{var Y=G=>{wt(G,{open:!0,get userId(){return e.userId},get book(){return t(i)},onclose:m})};D(U,G=>{t(i)&&t(w)==="editBook"&&G(Y)},!0)}s(l,W)};D(B,l=>{t(i)&&t(w)==="updatePage"?l(le):l(Q,!1)},!0)}s(f,H)};D(J,f=>{t(i)&&t(w)==="addReading"?f(F):f(q,!1)})}var n=k(J,2);{var C=f=>{va(f,{get book(){return t(r)},get userId(){return e.userId},onclose:o})};D(n,f=>{t(r)&&f(C)})}var K=k(n,2);zt(K,{children:(f,H)=>{var B=_e(),le=O(B);Ze(le,1,u,Q=>Q.id,(Q,l)=>{var W=ka();W.__contextmenu=fe;var U=x(W);Ye(U,{children:(ie,Ee)=>{var ae=ya(),L=O(ae);he(L,{children:(se,xe)=>{var ye=ga(),V=O(ye);V.__dblclick=()=>A(t(l).id);var ee=k(V,2);ee.__click=()=>_(t(l),"editBook");var Ie=x(ee);Ve(Ie,{get data(){return ct},scale:"0.8",style:"color: #666;"}),y(ee);var Re=k(ee,4),Fe=x(Re);y(Re);var He=k(Re,4),me=x(He,!0);y(He),oe(()=>{te(Fe,`${t(l).author??""}:`),te(me,t(l).title)}),Ne("keypress",ee,Be=>Be.key==="Enter"&&_(t(l),"editBook")),s(se,ye)},$$slots:{default:!0}});var ge=k(L,2);he(ge,{md:"6",children:(se,xe)=>{Ye(se,{children:(ye,V)=>{var ee=ba(),Ie=O(ee);he(Ie,{children:(me,Be)=>{var T=ma();T.__click=()=>_(t(l),"updatePage");var re=k(x(T),4),Pe=x(re);y(re),y(T),oe(()=>te(Pe,`${t(l).currentPage??""}/${t(l).pageCount??""}`)),Ne("keypress",T,we=>we.key==="Enter"&&_(t(l),"updatePage")),s(me,T)},$$slots:{default:!0}});var Re=k(Ie,2);he(Re,{children:(me,Be)=>{var T=ha();T.__click=()=>M(t(l));var re=k(x(T),4),Pe=x(re);{var we=N=>{var X=Me();oe(je=>te(X,je),[()=>We(Math.round(t(l).currentPage*(t(l).timeRead/t(l).pagesRead)))]),s(N,X)},De=N=>{var X=Me("NA");s(N,X)};D(Pe,N=>{b(t(l))?N(we):N(De,!1)})}y(re),y(T),Ne("keypress",T,N=>N.key==="Enter"&&M(t(l))),s(me,T)},$$slots:{default:!0}});var Fe=k(Re,2);he(Fe,{children:(me,Be)=>{var T=_a(),re=k(x(T),4),Pe=x(re);{var we=N=>{var X=Me();oe(je=>te(X,je),[()=>We(Math.round((t(l).pageCount-t(l).currentPage)*(t(l).timeRead/t(l).pagesRead)))]),s(N,X)},De=N=>{var X=Me("NA");s(N,X)};D(Pe,N=>{b(t(l))?N(we):N(De,!1)})}y(re),y(T),s(me,T)},$$slots:{default:!0}});var He=k(Fe,2);he(He,{children:(me,Be)=>{var T=pa(),re=k(x(T),4),Pe=x(re);{var we=N=>{var X=Me();oe(je=>te(X,je),[()=>Math.round(t(l).timeRead/t(l).pagesRead*100)/100]),s(N,X)},De=N=>{var X=Me("NA");s(N,X)};D(Pe,N=>{b(t(l))?N(we):N(De,!1)})}y(re),y(T),s(me,T)},$$slots:{default:!0}}),s(ye,ee)},$$slots:{default:!0}})},$$slots:{default:!0}});var $=k(ge,2);{var be=se=>{he(se,{md:"1",children:(xe,ye)=>{var V=xa();V.__click=()=>_(t(l),"addReading");var ee=x(V);Ve(ee,{get data(){return ot},scale:"1.7",style:"margin: auto; top: 25%; position: relative; cursor: pointer;"}),y(V),Ne("keypress",V,Ie=>Ie.key==="Enter"&&_(t(l),"addReading")),s(xe,V)},$$slots:{default:!0}})};D($,se=>{!e.finished&&t(h)>770&&se(be)})}s(ie,ae)},$$slots:{default:!0}});var Y=k(U,4);Ye(Y,{children:(ie,Ee)=>{he(ie,{children:(ae,L)=>{var ge=Pa(),$=x(ge);{let V=Ae(()=>t(l).currentPage/t(l).pageCount*100);jt($,{color:"danger",get value(){return t(V)}})}var be=k($,2),se=x(be);y(be);var xe=k(be,2),ye=x(xe);y(xe),y(ge),oe((V,ee)=>{te(se,`${V??""}%`),et(xe,`clip-path: inset(0 ${100-t(l).currentPage/t(l).pageCount*100}% 0 0);`),te(ye,`${ee??""}%`)},[()=>Math.round(t(l).currentPage/t(l).pageCount*100),()=>Math.round(t(l).currentPage/t(l).pageCount*100)]),s(ae,ge)},$$slots:{default:!0}})},$$slots:{default:!0}});var G=k(Y,2);{var Ue=ie=>{Ye(ie,{children:(Ee,ae)=>{he(Ee,{children:(L,ge)=>{var $=wa();$.__click=()=>_(t(l),"addReading");var be=x($);Ve(be,{get data(){return ot},scale:"1.3",style:"margin: auto; top: 25%; position: relative; cursor: pointer;"}),y($),Ne("keypress",$,se=>se.key==="Enter"&&_(t(l),"addReading")),s(L,$)},$$slots:{default:!0}})},$$slots:{default:!0}})};D(G,ie=>{!e.finished&&t(h)<=770&&ie(Ue)})}y(W),s(Q,W)}),s(f,B)},$$slots:{default:!0}}),Tt("innerWidth",f=>R(h,f,!0)),s(P,S),ce(),p()}dt(["contextmenu","dblclick","click"]);export{Aa as B};
