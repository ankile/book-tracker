import{b as at,g as gt,f as I,a as l,c as be,i as He,s as K,d as ut,e as Me,t as Se}from"./B3brjmWg.js";import{t as ne,H as st,M as rt,a3 as mt,aY as ht,I as nt,ak as _t,av as pt,aX as bt,aU as xt,R as yt,aj as Le,aZ as Pt,aM as kt,p as de,u as Fe,i as m,k as h,a as ue,ae as Te,h as q,V as ie,x as U,af as Je,f as E,m as t,j as k,s as ae,n as Pe,g as We,b as vt,A as wt}from"./COs9BhvN.js";import{e as Ze,i as lt,M as Ke,I as je,D as qe,f as $e,N as It}from"./CQtZaaab.js";import{l as oe,p as c,i as O,b as ct,s as Mt,a as qt}from"./4Dd6Wes_.js";import{c as ze,d as ye,i as zt,A as Rt,s as tt,h as it,C as Nt,r as Oe,e as Ue}from"./BDqwyajx.js";import{i as Qe}from"./DyWB8odC.js";import{i as Ct,g as ot,c as et,C as St}from"./B0mj6PkC.js";import{b as Tt}from"./Cnw-Cn1w.js";function At(b,e,v=!1,o=!1,w=!1){var _=b,r="";ne(()=>{var f=mt;if(r===(r=e()??"")){st&&rt();return}if(f.nodes_start!==null&&(ht(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),r!==""){if(st){nt.data;for(var p=rt(),x=p;p!==null&&(p.nodeType!==_t||p.data!=="");)x=p,p=pt(p);if(p===null)throw bt(),xt;at(nt,x),_=yt(p);return}var d=r+"";v?d=`<svg>${d}</svg>`:o&&(d=`<math>${d}</math>`);var n=gt(d);if((v||o)&&(n=Le(n)),at(Le(n),n.lastChild),v||o)for(;Le(n);)_.before(Le(n));else _.before(n)}})}function Et(b,e){Pt(window,["resize"],()=>kt(()=>e(window[b])))}var Bt=I("<div><!></div>");function pe(b,e){const v=oe(e,["children","$$slots","$$events","$$legacy"]),o=oe(v,["class","xs","sm","md","lg","xl","xxl"]);de(e,!1);let w=c(e,"class",8,""),_=c(e,"xs",8,void 0),r=c(e,"sm",8,void 0),f=c(e,"md",8,void 0),p=c(e,"lg",8,void 0),x=c(e,"xl",8,void 0),d=c(e,"xxl",8,void 0);const n=[],M={xs:_(),sm:r(),md:f(),lg:p(),xl:x(),xxl:d()};Object.keys(M).forEach(s=>{const g=M[s];if(!g&&g!=="")return;const N=s==="xs";if(Ct(g)){const z=N?"-":`-${s}-`,ve=ot(N,s,g.size);(g.size||g.size==="")&&n.push(ve),g.push&&n.push(`push${z}${g.push}`),g.pull&&n.push(`pull${z}${g.pull}`),g.offset&&n.push(`offset${z}${g.offset}`),g.order&&n.push(`order${z}${g.order}`)}else n.push(ot(N,s,g))}),n.length||n.push("col"),w()&&n.push(w()),Qe();var P=Bt();ze(P,s=>({...o,class:s}),[()=>Fe(()=>n.join(" "))]);var y=m(P);ye(y,e,"default",{},null),h(P),l(b,P),ue()}var Dt=I("<div><!></div>"),jt=I('<div role="progressbar" aria-valuemin="0"><!></div>'),Ot=I("<div><!></div>");function Ut(b,e){const v=oe(e,["children","$$slots","$$events","$$legacy"]),o=oe(v,["class","bar","multi","value","max","animated","striped","color","barClassName"]);de(e,!1);const w=ie(),_=ie(),r=ie();let f=c(e,"class",8,""),p=c(e,"bar",8,!1),x=c(e,"multi",8,!1),d=c(e,"value",8,0),n=c(e,"max",8,100),M=c(e,"animated",8,!1),P=c(e,"striped",8,!1),y=c(e,"color",8,""),s=c(e,"barClassName",8,"");Te(()=>U(f()),()=>{q(w,et(f(),"progress"))}),Te(()=>(U(p()),U(f()),U(s()),U(M()),U(y()),U(P())),()=>{q(_,et("progress-bar",p()&&f()||s(),M()?"progress-bar-animated":null,y()?`text-bg-${y()}`:null,P()||M()?"progress-bar-striped":null))}),Te(()=>(U(d()),U(n())),()=>{q(r,parseInt(d(),10)/parseInt(n(),10)*100)}),Je(),Qe();var g=be(),N=E(g);{var z=Y=>{var G=be(),H=E(G);{var Q=C=>{var a=be(),S=E(a);ye(S,e,"default",{},null),l(C,a)},le=C=>{var a=Dt();ze(a,()=>({...o,class:t(_),style:`width: ${t(r)??""}%`,role:"progressbar","aria-valuenow":d(),"aria-valuemin":"0","aria-valuemax":n()}));var S=m(a);ye(S,e,"default",{},null),h(a),l(C,a)};O(H,C=>{x()?C(Q):C(le,!1)})}l(Y,G)},ve=Y=>{var G=Ot();ze(G,()=>({...o,class:t(w)}));var H=m(G);{var Q=C=>{var a=be(),S=E(a);ye(S,e,"default",{},null),l(C,a)},le=C=>{var a=jt(),S=m(a);ye(S,e,"default",{},null),h(a),ne(()=>{zt(a,1,Rt(t(_))),tt(a,`width: ${t(r)??""}%`),it(a,"aria-valuenow",d()),it(a,"aria-valuemax",n())}),l(C,a)};O(H,C=>{x()?C(Q):C(le,!1)})}h(G),l(Y,G)};O(N,Y=>{p()?Y(z):Y(ve,!1)})}l(b,g),ue()}var Ht=I("<div><!></div>");function Ve(b,e){const v=oe(e,["children","$$slots","$$events","$$legacy"]),o=oe(v,["class","noGutters","form","cols","inner"]);de(e,!1);const w=ie();let _=c(e,"class",8,""),r=c(e,"noGutters",8,!1),f=c(e,"form",8,!1),p=c(e,"cols",8,0),x=c(e,"inner",12,void 0);function d(P){const y=parseInt(P);if(isNaN(y)){if(typeof P=="object")return["xs","sm","md","lg","xl"].map(s=>{const N=s==="xs"?"-":`-${s}-`,z=P[s];return typeof z=="number"&&z>0?`row-cols${N}${z}`:null}).filter(s=>!!s)}else if(y>0)return[`row-cols-${y}`];return[]}Te(()=>(U(_()),U(r()),U(f()),U(p())),()=>{q(w,et(_(),r()?"gx-0":null,f()?"form-row":"row",...d(p())))}),Je(),Qe();var n=Ht();ze(n,()=>({...o,class:t(w)}));var M=m(n);ye(M,e,"default",{},null),h(n),Tt(n,P=>x(P),()=>x()),l(b,n),ue()}var Xt=He("<g><!></g>");function Yt(b,e){de(e,!1);let v=870711;function o(){return v+=1,`fa-${v.toString(16)}`}let w=ie(""),_=c(e,"data",8);function r(x){if(!x||!x.raw)return"";let d=x.raw;const n={};return d=d.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(M,P)=>{const y=o();return n[P]=y,` id="${y}"`}),d=d.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(M,P,y,s)=>{const g=P||s;return!g||!n[g]?M:`#${n[g]}`}),d}Te(()=>U(_()),()=>{q(w,r(_()))}),Je();var f=Xt(),p=m(f);At(p,()=>t(w),!0),h(f),l(b,f),ue()}var Gt=He("<svg><!></svg>");function Lt(b,e){const v=oe(e,["children","$$slots","$$events","$$legacy"]),o=oe(v,["class","width","height","box","spin","inverse","pulse","flip","style","label"]);let w=c(e,"class",8,""),_=c(e,"width",8),r=c(e,"height",8),f=c(e,"box",8,"0 0 0 0"),p=c(e,"spin",8,!1),x=c(e,"inverse",8,!1),d=c(e,"pulse",8,!1),n=c(e,"flip",8,"none"),M=c(e,"style",8,""),P=c(e,"label",8,"");var y=Gt();ze(y,()=>({version:"1.1",class:`fa-icon ${w()??""}`,width:_(),height:r(),"aria-label":P(),role:P()?"img":"presentation",viewBox:f(),style:M(),...o,[Nt]:{"fa-spin":p(),"fa-pulse":d(),"fa-inverse":x(),"fa-flip-horizontal":n()==="horizontal","fa-flip-vertical":n()==="vertical"}}),void 0,void 0,void 0,"svelte-v67cny");var s=m(y);ye(s,e,"default",{},null),h(y),l(b,y)}var Vt=He("<path></path>"),Ft=He("<polygon></polygon>"),Zt=He("<!><!><!>",1);function De(b,e){const v=oe(e,["children","$$slots","$$events","$$legacy"]),o=oe(v,["class","data","scale","spin","inverse","pulse","flip","label","style"]);de(e,!1);let w=c(e,"class",8,""),_=c(e,"data",8),r=ie(),f=c(e,"scale",8,1),p=c(e,"spin",8,!1),x=c(e,"inverse",8,!1),d=c(e,"pulse",8,!1),n=c(e,"flip",8,void 0),M=c(e,"label",8,""),P=c(e,"style",8,""),y=1,s=ie(10),g=ie(10),N=ie(),z=ie();function ve(a){let S,W;if(a)if("definition"in a){console.error("`import faIconName from '@fortawesome/package-name/faIconName` not supported - Please use `import { faIconName } from '@fortawesome/package-name/faIconName'` instead");return}else if("iconName"in a&&"icon"in a){S=a.iconName;const[ce,i,,,B]=a.icon,L=Array.isArray(B)?B:[B];W={width:ce,height:i,paths:L.map(se=>({d:se}))}}else S=Object.keys(a)[0],W=a[S];else return;return W}function Y(){let a=1;return typeof f()<"u"&&(a=Number(f())),isNaN(a)||a<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),y):a*y}function G(){return t(r)?`0 0 ${t(r).width} ${t(r).height}`:`0 0 ${t(s)} ${t(g)}`}function H(){return t(r)?Math.max(t(r).width,t(r).height)/16:1}function Q(){return t(r)?t(r).width/H()*Y():0}function le(){return t(r)?t(r).height/H()*Y():0}function C(){let a="";P()!==null&&(a+=P());let S=Y();return S===1?a.length===0?"":a:(a!==""&&!a.endsWith(";")&&(a+="; "),`${a}font-size: ${S}em`)}Te(()=>(U(_()),U(P()),U(f())),()=>{q(r,ve(_())),P(),f(),q(s,Q()),q(g,le()),q(N,C()),q(z,G())}),Je(),Qe(),Lt(b,ct({get label(){return M()},get width(){return t(s)},get height(){return t(g)},get box(){return t(z)},get style(){return t(N)},get spin(){return p()},get flip(){return n()},get inverse(){return x()},get pulse(){return d()},get class(){return w()}},()=>o,{children:(a,S)=>{var W=be(),ce=E(W);ye(ce,e,"default",{},i=>{var B=Zt(),L=E(B);Ze(L,1,()=>(t(r),Fe(()=>t(r)?.paths||[])),lt,(A,$)=>{var F=Vt();ze(F,()=>({...t($)})),l(A,F)});var se=k(L);Ze(se,1,()=>(t(r),Fe(()=>t(r)?.polygons||[])),lt,(A,$)=>{var F=Ft();ze(F,()=>({...t($)})),l(A,F)});var fe=k(se);{var u=A=>{Yt(A,{get data(){return t(r)},set data($){q(r,$)},$$legacy:!0})};O(fe,A=>{t(r),Fe(()=>t(r)?.raw)&&A(u)})}l(i,B)}),l(a,W)},$$slots:{default:!0}})),ue()}const ft={edit:{width:1792,height:1792,paths:[{d:"M888 1184l116-116-152-152-116 116v56h96v96h56zM1328 464q-16-16-33 1l-350 350q-17 17-1 33t33-1l350-350q17-17 1-33zM1408 1058v190q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-14 14-32 8-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-126q0-13 9-22l64-64q15-15 35-7t20 29zM1312 320l288 288-672 672h-288v-288zM1756 452l-92 92-288-288 92-92q28-28 68-28t68 28l152 152q28 28 28 68t-28 68z"}]}},dt={plus:{width:1408,height:1792,paths:[{d:"M1408 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"}]}},Jt={trash:{width:1408,height:1792,paths:[{d:"M512 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zM768 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zM1024 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zM480 384h448l-48-117q-7-9-17-11h-317q-10 2-17 11zM1408 416v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"}]}};function Kt({inputTime:b,inputPages:e,previousPage:v,pageCount:o}){const w=Number.parseInt(b),_=Number.parseInt(e);return!b||b.length<1?{valid:!1,message:"Time read was empty"}:!e||e.length<1?{valid:!1,message:"Current page was empty"}:Object.is(_,"NaN")?{valid:!1,message:"Page number added is not a valid integer"}:Object.is(w,"NaN")?{valid:!1,message:"Number of minutes spent reading is not a valid integer"}:_<v?{valid:!1,message:"You can't read backwards. If you have to adjust the current page press the current page on the book card."}:o<_?{valid:!1,message:"You can't read more pages than there are in the book."}:{valid:!0}}function Qt({inputPages:b,pageCount:e}){const v=Number.parseInt(b);return!b||b.length<1?{valid:!1,message:"Page number is empty, and I don't like that one bit – no, sir, I don't."}:Object.is(v,NaN)?{valid:!1,message:"Page number is not a valid number."}:v<0||e<v?{valid:!1,message:"Page number must be between 0 and the total number of pages in the book."}:{valid:!0}}var Wt=I('<input id="inputTime" class="form-control" placeholder="Minutes of reading" type="number"/>'),$t=I('<input id="inputPagesReading" class="form-control" type="number" placeholder="What page are you on"/>'),ea=I('<!> <div style="height: 8px;"></div> <!>',1);function ta(b,e){de(e,!0);let v=ae(void 0),o=ae(void 0);function w(){console.log(t(v)+t(o));const{valid:r,message:f}=Kt({inputTime:t(v),inputPages:t(o),previousPage:e.book.currentPage,pageCount:e.book.pageCount});if(!r){alert(f);return}e.onaddReading({id:e.book.id,timeRead:t(v),currentPage:t(o),previousPage:e.book.currentPage}),e.oncloseModal()}function _(){e.oncloseModal()}{let r=Pe(()=>!!e.book);Ke(b,{get open(){return t(r)},onclose:_,primaryText:"Add",primaryAction:w,get header(){return e.book.title},children:(f,p)=>{var x=ea(),d=E(x);je(d,{label:"Minutes read",inputId:"inputTime",children:(M,P)=>{var y=Wt();Oe(y),Ue(y,()=>t(v),s=>q(v,s)),l(M,y)},$$slots:{default:!0}});var n=k(d,4);je(n,{label:"Current page",inputId:"inputPagesReading",children:(M,P)=>{var y=$t();Oe(y),Ue(y,()=>t(o),s=>q(o,s)),l(M,y)},$$slots:{default:!0}}),l(f,x)},$$slots:{default:!0}})}ue()}var aa=I('<input id="inputPages" class="form-control" type="number" placeholder="What page are you on"/>');function sa(b,e){de(e,!0);let v=Pe(()=>!!e.book),o=ae(void 0);function w(){const{valid:_,message:r}=Qt({inputPages:t(o),pageCount:e.book.pageCount});if(!_){alert(r);return}e.onupdateCurrentPage({id:e.book.id,currentPage:Number.parseInt(t(o)),previousPage:e.book.currentPage}),e.oncloseModal()}Ke(b,{get open(){return t(v)},onclose:()=>e.oncloseModal(),get header(){return e.book.title},primaryAction:w,primaryText:"Update page",children:(_,r)=>{je(_,{label:"Set current page",inputId:"inputPages",children:(f,p)=>{var x=aa();Oe(x),Ue(x,()=>t(o),d=>q(o,d)),l(f,x)},$$slots:{default:!0}})},$$slots:{default:!0}}),ue()}var ra=I('<input id="inputTime" class="form-control" placeholder="Minutes of reading" type="number"/>'),na=I('<input id="inputToPage" class="form-control" type="number" placeholder="Ending page"/>'),la=I('<!> <div style="height: 8px;"></div> <div style="margin-bottom: 1rem;"><label style="font-size: 0.9rem; color: #666; display: block; margin-bottom: 0.25rem;">From page (cannot be changed)</label> <div style="padding: 0.5rem; background-color: #f5f5f5; border-radius: 4px; color: #666;"> </div></div> <!>',1);function ia(b,e){de(e,!0);let v=ae(We(e.session?.timeRead||0)),o=ae(We(e.session?.toPage||0));vt(()=>{e.session&&(q(v,e.session.timeRead,!0),q(o,e.session.toPage,!0))});function w(){if(t(v)<=0){alert("Time read must be greater than 0");return}if(t(o)<0){alert("Page numbers must be positive");return}if(t(o)<=e.session.fromPage){alert(`End page must be greater than start page (${e.session.fromPage})`);return}if(e.book&&t(o)>e.book.pageCount){alert(`Page number cannot exceed book's total pages (${e.book.pageCount})`);return}e.onupdateSession({sessionId:e.session.id,timeRead:t(v),fromPage:e.session.fromPage,toPage:t(o)}),e.oncloseModal()}function _(){e.oncloseModal()}{let r=Pe(()=>!!e.session);Ke(b,{get open(){return t(r)},onclose:_,primaryText:"Update",primaryAction:w,header:"Edit Reading Session",children:(f,p)=>{var x=la(),d=E(x);je(d,{label:"Minutes read",inputId:"inputTime",children:(s,g)=>{var N=ra();Oe(N),Ue(N,()=>t(v),z=>q(v,z)),l(s,N)},$$slots:{default:!0}});var n=k(d,4),M=k(m(n),2),P=m(M,!0);h(M),h(n);var y=k(n,2);je(y,{label:"To page",inputId:"inputToPage",children:(s,g)=>{var N=na();Oe(N),Ue(N,()=>t(o),z=>q(o,z)),l(s,N)},$$slots:{default:!0}}),ne(()=>K(P,e.session?.fromPage||0)),l(f,x)},$$slots:{default:!0}})}ue()}var oa=I('<div class="empty-state svelte-4szxma">No reading sessions recorded yet.</div>'),da=I('<span role="button" tabindex="0" class="edit-button svelte-4szxma"><!></span> <span role="button" tabindex="0" class="edit-button svelte-4szxma"><!></span>',1),ua=I('<span class="button-spacer svelte-4szxma"></span> <span class="button-spacer svelte-4szxma"></span>',1),va=I('<div class="session svelte-4szxma"><div class="session-header svelte-4szxma"><span class="session-date svelte-4szxma"> </span> <div class="session-time-container svelte-4szxma"><!> <span class="session-time svelte-4szxma"> </span></div></div> <div class="session-details svelte-4szxma"><div class="detail svelte-4szxma"><span class="detail-label svelte-4szxma">Pages:</span> <span> </span></div> <div class="detail svelte-4szxma"><span class="detail-label svelte-4szxma">Read:</span> <span> </span></div></div></div>'),ca=I('<div class="sessions-container svelte-4szxma"><!></div>'),fa=I("<!> <!>",1);function ga(b,e){de(e,!0);let v=Pe(()=>!!e.book),o=ae(We([]));vt(()=>{if(e.book&&e.userId)return qe.getReadingSessions(e.userId,e.book.id).subscribe(g=>{q(o,g,!0)})});let w=ae(null),_=Pe(()=>t(w)?t(o).find(s=>s.id===t(w)):null);function r(s){return s?.toDate?s.toDate().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function f(s){q(w,s.id,!0)}function p(s){qe.updateReadingSession({userId:e.userId,bookId:e.book.id,...s})}function x(){q(w,null)}function d(s){confirm("Are you sure you want to delete this reading session? This will update your book's progress accordingly.")&&qe.deleteReadingSession(e.userId,e.book.id,s.id)}var n=fa(),M=E(n);{let s=Pe(()=>e.book?`Reading Sessions - ${e.book.title}`:"Reading Sessions");Ke(M,{get open(){return t(v)},onclose:()=>e.onclose(),get header(){return t(s)},primaryAction:()=>e.onclose(),primaryText:"Close",hideSecondary:!0,children:(g,N)=>{var z=ca(),ve=m(z);{var Y=H=>{var Q=oa();l(H,Q)},G=H=>{var Q=be(),le=E(Q);Ze(le,19,()=>t(o),C=>C.id,(C,a,S)=>{var W=va(),ce=m(W),i=m(ce),B=m(i,!0);h(i);var L=k(i,2),se=m(L);{var fe=X=>{var D=da(),Z=E(D);Z.__click=()=>f(t(a));var J=m(Z);De(J,{get data(){return ft},scale:"0.8",style:"color: #666;"}),h(Z);var ee=k(Z,2);ee.__click=()=>d(t(a));var he=m(ee);De(he,{get data(){return Jt},scale:"0.8",style:"color: #d9534f;"}),h(ee),Me("keypress",Z,j=>j.key==="Enter"&&f(t(a))),Me("keypress",ee,j=>j.key==="Enter"&&d(t(a))),l(X,D)},u=X=>{var D=ua();wt(2),l(X,D)};O(se,X=>{t(S)===0?X(fe):X(u,!1)})}var A=k(se,2),$=m(A,!0);h(A),h(L),h(ce);var F=k(ce,2),ge=m(F),Xe=k(m(ge),2),me=m(Xe);h(Xe),h(ge);var Re=k(ge,2),xe=k(m(Re),2),ke=m(xe);h(xe),h(Re),h(F),h(W),ne((X,D)=>{K(B,X),K($,D),K(me,`${t(a).fromPage??""} → ${t(a).toPage??""}`),K(ke,`${t(a).pagesRead??""} pages`)},[()=>r(t(a).createdAt),()=>$e(t(a).timeRead)]),l(C,W)}),l(H,Q)};O(ve,H=>{t(o).length===0?H(Y):H(G,!1)})}h(z),l(g,z)},$$slots:{default:!0}})}var P=k(M,2);{var y=s=>{ia(s,{get session(){return t(_)},get book(){return e.book},onupdateSession:p,oncloseModal:x})};O(P,s=>{t(_)&&s(y)})}l(b,n),ue()}ut(["click"]);var ma=I('<div class="menu svelte-a7k8bh">Hello</div>');function ha(b,e){var v=ma();ne(()=>tt(v,`left: ${e.x}px; top: ${e.y}px;`)),l(b,v)}var _a=I('<span class="label svelte-1l34oh7">Book Title</span> <span role="button" tabindex="0" style="cursor: pointer; margin-left: 0.5em;"><!></span> <br/> <span class="author svelte-1l34oh7"> </span> <br/> <span class="title svelte-1l34oh7"> </span>',1),pa=I('<div role="button" tabindex="0" class="text-right svelte-1l34oh7" style="cursor: pointer;"><span class="label svelte-1l34oh7">Page</span> <br/> <span class="page-number svelte-1l34oh7"> </span></div>'),ba=I('<div role="button" tabindex="0" class="text-right clickable svelte-1l34oh7" style="cursor: pointer;"><span class="label svelte-1l34oh7">Time read</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),xa=I('<div class="text-right svelte-1l34oh7"><span class="label svelte-1l34oh7">Est left</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),ya=I('<div class="text-right svelte-1l34oh7"><span class="label svelte-1l34oh7">Min/Page</span> <br/> <span class="page-number svelte-1l34oh7"><!></span></div>'),Pa=I("<!> <!> <!> <!>",1),ka=I('<div role="button" tabindex="0" style="height: 100%; text-align: center;"><!></div>'),wa=I("<!> <!> <!>",1),Ia=I('<div class="progress-container svelte-1l34oh7"><!> <div class="progress-text-black svelte-1l34oh7"> </div> <div class="progress-text-white svelte-1l34oh7"> </div></div>'),Ma=I('<div role="button" tabindex="0" style="height: 100%; text-align: center;"><!></div>'),qa=I('<div class="book-row svelte-1l34oh7"><!> <div class="v-spacer svelte-1l34oh7"></div> <!> <!></div>'),za=I("<!> <!> <!> <!>",1);function Da(b,e){de(e,!0);const v=()=>qt(t(s),"$books",o),[o,w]=Mt();let _=c(e,"books",3,null),r=ae(void 0),f=ae(null),p=ae(null),x=ae(null);const d=(i,B)=>{q(p,i,!0),q(x,B,!0)},n=()=>q(p,null);let M=ae(null);const P=i=>q(M,i,!0),y=()=>q(M,null);let s=Pe(()=>_()!==null?{subscribe:i=>(i(_()),()=>{})}:qe.getBooks(e.userId,e.finished));function g(i){return i.pagesRead!==0&&i.timeRead!==0}function N(i){qe.addReading({userId:e.userId,...i})}function z(i){qe.addPageUpdate({userId:e.userId,...i})}function ve(i){confirm("Are you sure you want to delete this book?")&&qe.deleteBook(e.userId,i)}function Y(i){console.log(i),i.preventDefault();const{x:B,y:L}=i;q(f,{x:B,y:L},!0)}var G=za(),H=E(G);{var Q=i=>{ha(i,ct(()=>t(f)))};O(H,i=>{t(f)&&i(Q)})}var le=k(H,2);{var C=i=>{ta(i,{get book(){return t(p)},onaddReading:N,oncloseModal:n})},a=i=>{var B=be(),L=E(B);{var se=u=>{sa(u,{get book(){return t(p)},onupdateCurrentPage:z,oncloseModal:n})},fe=u=>{var A=be(),$=E(A);{var F=ge=>{It(ge,{open:!0,get userId(){return e.userId},get book(){return t(p)},onclose:n})};O($,ge=>{t(p)&&t(x)==="editBook"&&ge(F)},!0)}l(u,A)};O(L,u=>{t(p)&&t(x)==="updatePage"?u(se):u(fe,!1)},!0)}l(i,B)};O(le,i=>{t(p)&&t(x)==="addReading"?i(C):i(a,!1)})}var S=k(le,2);{var W=i=>{ga(i,{get book(){return t(M)},get userId(){return e.userId},onclose:y})};O(S,i=>{t(M)&&i(W)})}var ce=k(S,2);St(ce,{children:(i,B)=>{var L=be(),se=E(L);Ze(se,1,v,fe=>fe.id,(fe,u)=>{var A=qa();A.__contextmenu=Y;var $=m(A);Ve($,{children:(me,Re)=>{var xe=wa(),ke=E(xe);pe(ke,{children:(J,ee)=>{var he=_a(),j=E(he);j.__dblclick=()=>ve(t(u).id);var te=k(j,2);te.__click=()=>d(t(u),"editBook");var Ne=m(te);De(Ne,{get data(){return ft},scale:"0.8",style:"color: #666;"}),h(te);var Ce=k(te,4),Ye=m(Ce);h(Ce);var Ge=k(Ce,4),_e=m(Ge,!0);h(Ge),ne(()=>{K(Ye,`${t(u).author??""}:`),K(_e,t(u).title)}),Me("keypress",te,Ae=>Ae.key==="Enter"&&d(t(u),"editBook")),l(J,he)},$$slots:{default:!0}});var X=k(ke,2);pe(X,{md:"6",children:(J,ee)=>{Ve(J,{children:(he,j)=>{var te=Pa(),Ne=E(te);pe(Ne,{children:(_e,Ae)=>{var T=pa();T.__click=()=>d(t(u),"updatePage");var re=k(m(T),4),we=m(re);h(re),h(T),ne(()=>K(we,`${t(u).currentPage??""}/${t(u).pageCount??""}`)),Me("keypress",T,Ie=>Ie.key==="Enter"&&d(t(u),"updatePage")),l(_e,T)},$$slots:{default:!0}});var Ce=k(Ne,2);pe(Ce,{children:(_e,Ae)=>{var T=ba();T.__click=()=>P(t(u));var re=k(m(T),4),we=m(re);{var Ie=R=>{var V=Se();ne(Be=>K(V,Be),[()=>$e(t(u).timeRead)]),l(R,V)},Ee=R=>{var V=Se("NA");l(R,V)};O(we,R=>{g(t(u))?R(Ie):R(Ee,!1)})}h(re),h(T),Me("keypress",T,R=>R.key==="Enter"&&P(t(u))),l(_e,T)},$$slots:{default:!0}});var Ye=k(Ce,2);pe(Ye,{children:(_e,Ae)=>{var T=xa(),re=k(m(T),4),we=m(re);{var Ie=R=>{var V=Se();ne(Be=>K(V,Be),[()=>$e(Math.round((t(u).pageCount-t(u).currentPage)*(t(u).timeRead/t(u).pagesRead)))]),l(R,V)},Ee=R=>{var V=Se("NA");l(R,V)};O(we,R=>{g(t(u))?R(Ie):R(Ee,!1)})}h(re),h(T),l(_e,T)},$$slots:{default:!0}});var Ge=k(Ye,2);pe(Ge,{children:(_e,Ae)=>{var T=ya(),re=k(m(T),4),we=m(re);{var Ie=R=>{var V=Se();ne(Be=>K(V,Be),[()=>Math.round(t(u).timeRead/t(u).pagesRead*100)/100]),l(R,V)},Ee=R=>{var V=Se("NA");l(R,V)};O(we,R=>{g(t(u))?R(Ie):R(Ee,!1)})}h(re),h(T),l(_e,T)},$$slots:{default:!0}}),l(he,te)},$$slots:{default:!0}})},$$slots:{default:!0}});var D=k(X,2);{var Z=J=>{pe(J,{md:"1",children:(ee,he)=>{var j=ka();j.__click=()=>d(t(u),"addReading");var te=m(j);De(te,{get data(){return dt},scale:"1.7",style:"margin: auto; top: 25%; position: relative; cursor: pointer;"}),h(j),Me("keypress",j,Ne=>Ne.key==="Enter"&&d(t(u),"addReading")),l(ee,j)},$$slots:{default:!0}})};O(D,J=>{!e.finished&&t(r)>770&&J(Z)})}l(me,xe)},$$slots:{default:!0}});var F=k($,4);Ve(F,{children:(me,Re)=>{pe(me,{children:(xe,ke)=>{var X=Ia(),D=m(X);{let j=Pe(()=>t(u).currentPage/t(u).pageCount*100);Ut(D,{color:"danger",get value(){return t(j)}})}var Z=k(D,2),J=m(Z);h(Z);var ee=k(Z,2),he=m(ee);h(ee),h(X),ne((j,te)=>{K(J,`${j??""}%`),tt(ee,`clip-path: inset(0 ${100-t(u).currentPage/t(u).pageCount*100}% 0 0);`),K(he,`${te??""}%`)},[()=>Math.round(t(u).currentPage/t(u).pageCount*100),()=>Math.round(t(u).currentPage/t(u).pageCount*100)]),l(xe,X)},$$slots:{default:!0}})},$$slots:{default:!0}});var ge=k(F,2);{var Xe=me=>{Ve(me,{children:(Re,xe)=>{pe(Re,{children:(ke,X)=>{var D=Ma();D.__click=()=>d(t(u),"addReading");var Z=m(D);De(Z,{get data(){return dt},scale:"1.3",style:"margin: auto; top: 25%; position: relative; cursor: pointer;"}),h(D),Me("keypress",D,J=>J.key==="Enter"&&d(t(u),"addReading")),l(ke,D)},$$slots:{default:!0}})},$$slots:{default:!0}})};O(ge,me=>{!e.finished&&t(r)<=770&&me(Xe)})}h(A),l(fe,A)}),l(i,L)},$$slots:{default:!0}}),Et("innerWidth",i=>q(r,i,!0)),l(b,G),ue(),w()}ut(["contextmenu","dblclick","click"]);export{Da as B};
